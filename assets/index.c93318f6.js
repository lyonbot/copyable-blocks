var V=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var O=(i,t,e)=>t in i?V(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,g=(i,t)=>{for(var e in t||(t={}))X.call(t,e)&&O(i,e,t[e]);if(I)for(var e of I(t))Y.call(t,e)&&O(i,e,t[e]);return i},N=(i,t)=>G(i,J(t));import{r,c as q}from"./vendor.94ee8ec3.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}};Q();function D(){return D=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},D.apply(this,arguments)}const U=(i,t,e)=>{const o=i._listeners;o[t]?o[t].push(e):o[t]=[e]};class M{constructor(){this._listeners={}}on(t,e){return U(this,t,{listener:e}),this}once(t,e){return U(this,t,{listener:e,once:!0}),this}off(t,e){const o=this._listeners[t];if(!o)return this;if(o.length===1&&e===o[0].listener)return this._listeners[t]=null,this;const s=o.findIndex(n=>n.listener===e);return s!==-1&&o.splice(s,1),this}emit(t,...e){const o=this._listeners[t];if(!o)return;let s=!1;o.forEach(n=>{n.listener(e),n.once&&(s=!0)}),s&&(this._listeners[t]=o.filter(n=>!n.once))}removeAllListeners(){return this._listeners={},this}}function Z(i,t){return!(typeof i!="object"||!i||i.isIBClipboardData!==!0||typeof t=="string"&&t!==i.ibContextBrand||typeof i.ibContextBrand!="string"||"ibContextUUID"in i&&typeof i.ibContextUUID!="string"||!Array.isArray(i.blocksData)||i.blocksData.some(e=>typeof e!="object"||e===null))}const x=()=>function(i){Object.assign(this,i),this.returnValue=!0,this.preventDefault=()=>{this.returnValue=!1}},tt=x(),et=x(),ot=x(),st=x(),nt=x(),ut=x(),R=(i,t)=>typeof i=="function"?i(t):i;function L(i,t){if(t==="camelCase")return i;const e={};return Object.keys(i).forEach(o=>{var s;let n=o;t==="react"?n=`on${(s=n[0])==null?void 0:s.toUpperCase()}${n.slice(1)}`:t!=="lowercase"&&t!=="vue"&&t||(n=n.toLowerCase()),e[n]=i[o]}),e}function K(i){function t(...e){if(typeof i=="function")return i.apply(this,e)}return t.revoke=()=>i=void 0,t.setImpl=e=>{i=e},t}function it(i,t){let e,o;function s(u=!1){e&&(u&&o&&i(...o),clearTimeout(e),e=null,o=void 0)}const n=function(...u){o=u,e||(e=setTimeout(()=>s(!0),t))};return n.cancel=()=>s(!1),n.flush=()=>s(!0),n}function b(i,t){const e=t.map(o=>i[o]).filter(o=>o!==void 0);return[...t].sort((o,s)=>s-o).forEach(o=>i.splice(o,1)),e}function rt(i,t,e){const o=b(i,t);i.splice(e,0,...o)}function lt(i,t,e,o){const s=b(i,t);e.splice(o,0,...s)}const S=Object.assign;class ct{get activeNumber(){return this._activeNumber}get isActive(){return this._activeNumber!==!1}get hasFocus(){return this.isActive&&this.ctx.hasFocus}get ref(){return this.info.ref}_maybeUpdateActiveNumber(t){var e,o;return this._activeNumber!==t&&(this._activeNumber=t,(e=(o=this.info).onStatusChange)==null||e.call(o,this),!0)}select(t){this.ctx.addBlockToSelection(this,t)}unselect(){this.isActive&&(this.ctx.activeBlocks.delete(this),this.ctx.syncActiveElementStatus())}focus(t){this.isActive||this.select(t),this.ctx.focus()}constructor(t,e,o){this.is="BlockHandler",this.ctx=void 0,this.ownerSlot=void 0,this.slots=new Set,this.info=void 0,this._activeNumber=!1,this._lastElement=void 0,this.handlePointerUp=K(s=>{this.ctx.handleBlockPointerUp(this,s)}),this.ctx=t,this.ownerSlot=e,e&&e.items.add(this),this.info=o}get index(){return R(this.info.index,this)}get data(){return R(this.info.data,this)}createSlot(t){return this.ctx.createSlot(t,this)}getDOMEvents(t,e={}){var o;const s={};return((o=e.isWrapper)==null||o)&&S(s,{pointerUp:this.handlePointerUp}),e.isDraggable&&S(s,this.ctx.dragging.getBlockDOMEventHandlers(this)),L(s,t)}dispose(){var t;this.ctx.activeBlocks.has(this)&&(this.ctx.activeBlocks.delete(this),this.ctx.syncActiveElementStatus()),(t=this.ownerSlot)==null||t.items.delete(this),this.slots.forEach(e=>e.dispose()),this.slots.clear(),this.info=at,this._lastElement=void 0,this.handlePointerUp.revoke()}}const at={index:()=>{throw new Error("Accessing a disposed block")},data:()=>{throw new Error("Accessing a disposed block")}};function W(i,t){if(!i)return;let e=0;for(const o of i){if(t(o,e))return o;e+=1}}function E(i){if(i)return i[Symbol.iterator]().next().value}const Ft="webkitRequestAnimationFrame"in window,m=document.createElement("div");m.style.cssText="position:fixed;pointer-events:none;left:0;top:0;background: #FFF; border: 1px solid #000; padding: 4px 8px;transform:translate(-50%, -50%)";class ht extends M{constructor(t){super(),this.ctx=void 0,this.draggingBlocks=void 0,this.slotOfDraggingBlocks=void 0,this.isHovering=!1,this.hoveringSlot=void 0,this.hoveringBlock=void 0,this.dropEffect=void 0,this.setHoveringSlot=it(this._originalSetHoveringSlot.bind(this),50),this.ctx=t}dispose(){this.removeAllListeners(),this.setHoveringSlot.cancel()}_originalSetHoveringSlot(t,e){var o;if(t&&typeof e!="number")throw new Error("Cannot setHoveringSlot with indexToDrop unknown");if(t===this.hoveringSlot)return void(t&&t.indexToDrop!==e&&(t.indexToDrop=e,t.info.onDragHoverStatusChange==null||t.info.onDragHoverStatusChange(this.ctx),this.emit("hoverChanged",this.ctx)));const s=this.hoveringSlot;((o=this.hoveringBlock)==null?void 0:o.ownerSlot)!==t&&(this.hoveringBlock=void 0),this.hoveringSlot=t,this.isHovering=!!t,s&&(s.isDragHovering=!1,s.indexToDrop=void 0,s.info.onDragHoverStatusChange==null||s.info.onDragHoverStatusChange(this.ctx)),t&&(t.isDragHovering=!0,t.indexToDrop=e,t.info.onDragHoverStatusChange==null||t.info.onDragHoverStatusChange(this.ctx)),this.emit("hoverChanged",this.ctx)}getBlockDOMEventHandlers(t){return{dragStart:this.handleBlockDragStart.bind(this,t),dragEnd:this.handleBlockDragEnd.bind(this,t),dragOver:this.handleBlockDragOver.bind(this,t),dragLeave:this.handleBlockDragLeave.bind(this,t)}}handleBlockDragStart(t,e){const o=e.dataTransfer;if(!o)return;this.ctx.activeBlocks.has(t)||this.ctx.addBlockToSelection(t,"none");const s=this.ctx.options.serializeForClipboard(this.ctx.dumpSelectedData());if(!s)return;const n=Array.from(this.ctx.activeBlocks),u=new nt({type:"blockDragStart",text:s,blocks:n,ctx:this.ctx,currentBlock:t,dataTransfer:o,event:e});if(t.info.onDragStart==null||t.info.onDragStart(u),this.emit("blockDragStart",u),u.returnValue===!1)return;e.stopPropagation(),o.setData("text/plain",u.text),o.setData("x-block-context/uuid",this.ctx.uuid),o.setData(`x-block-context/brand-${this.ctx.brand}`,"true"),n.length>1&&(document.body.appendChild(m),m.style.left=`${e.clientX}px`,m.style.top=`${e.clientY}px`,setTimeout(()=>m.remove(),100),m.textContent=`${n.length} items`,o.setDragImage(m,m.offsetWidth/2,m.offsetHeight/2));const l=this.ctx.slotOfActiveBlocks;this.draggingBlocks=n,this.slotOfDraggingBlocks=l||void 0,l&&(this.setHoveringSlot(l,t.index),this.setHoveringSlot.flush())}handleBlockDragEnd(){this.slotOfDraggingBlocks=void 0,this.draggingBlocks=void 0,this.setHoveringSlot(void 0)}handleBlockDragOver(t){this.hoveringBlock!==t&&t.ownerSlot==this.hoveringSlot&&(this.hoveringBlock=t,this.emit("hoverChanged",this.ctx))}handleBlockDragLeave(t){this.hoveringBlock===t&&(this.hoveringBlock=void 0,this.emit("hoverChanged",this.ctx))}getSlotDOMEventHandlers(t){return{dragOver:e=>{this.handleSlotDragOver(t,e)&&(e.preventDefault(),e.stopPropagation())},dragLeave:e=>{this.handleSlotDragLeave(t),e.preventDefault(),e.stopPropagation()},drop:e=>{this.handleSlotDrop(t,e),e.preventDefault(),e.stopPropagation()}}}handleSlotDragOver(t,e){var o;if((o=e.dataTransfer)!=null&&o.types.includes("x-block-context/uuid")&&!e.dataTransfer.types.includes(`x-block-context/brand-${this.ctx.brand}`))return!1;const s=this.computeIndexToDrop(t,e);return s!==!1&&(this.setHoveringSlot(t,s),!0)}handleSlotDrop(t,e){const o=this.computeIndexToDrop(t,e);if(o===!1)return;const s=this.dropEffect,n=this.draggingBlocks,u=this.ctx,l=new ut({type:"slotBeforeDrop",ctx:u,slot:t,dropEffect:s,dataTransfer:e.dataTransfer,event:e,indexToDrop:o,isDraggingFromCurrentCtx:!!n,draggingBlocks:n});if(this.emit("slotBeforeDrop",l),l.returnValue===!1)return this.setHoveringSlot(void 0),void this.setHoveringSlot.flush();if(this.setHoveringSlot(t,o),this.setHoveringSlot.flush(),n&&s!=="copy")if(t===u.slotOfActiveBlocks){const c=o-n.filter(h=>h.index<o).length,a=new ot({type:"moveInSlot",blocks:n,ctx:u,slot:t,index:c});if(t.info.onMoveInSlot==null||t.info.onMoveInSlot(a),u.emit("moveInSlot",a),!a.returnValue)return;setTimeout(()=>{u.activeSlot=t,u.activeBlocks.clear(),t.items.forEach(h=>{const F=h.index;F>=c&&F<c+n.length&&u.activeBlocks.add(h)}),u.syncActiveElementStatus(),u.focus()},100)}else{const c=o,a=new st({type:"moveBetweenSlots",blocks:n,ctx:u,fromSlot:u.slotOfActiveBlocks,toSlot:t,index:c});if(t.info.onMoveToThisSlot==null||t.info.onMoveToThisSlot(a),u.emit("moveBetweenSlots",a),!a.returnValue)return;setTimeout(()=>{u.activeSlot=t,u.activeBlocks.clear(),t.items.forEach(h=>{const F=h.index;F>=c&&F<c+n.length&&u.activeBlocks.add(h)}),u.syncActiveElementStatus(),u.focus()},100)}else try{const c=this.ctx.options.unserializeForClipboard(e.dataTransfer.getData("text/plain"));u.activeSlot=t,u.activeBlocks.clear(),u.syncActiveElementStatus(),u.pasteWithData(c,o),u.focus()}catch(c){console.error("Failed to drop")}this.setHoveringSlot(void 0)}handleSlotDragLeave(t){this.setHoveringSlot(void 0)}computeIndexToDrop(t,e){var o;let s=e.dataTransfer.dropEffect;if(s==="none"&&Ft&&(s=e.ctrlKey||e.altKey?"copy":"move"),this.dropEffect=s,this.dropEffect!=="copy"&&(o=this.draggingBlocks)!=null&&o.some(c=>t.isDescendantOfBlock(c)))return!1;const n=t.info.computeIndexToDrop==null?void 0:t.info.computeIndexToDrop({ctx:this.ctx,slot:t,isDraggingFromCurrentCtx:!!this.draggingBlocks,draggingBlocks:this.draggingBlocks,dataTransfer:e.dataTransfer,dropEffect:this.dropEffect,currentTarget:e.currentTarget,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY});return n!==!1&&(n===void 0?(u=(l=this.hoveringBlock)==null?void 0:l.index)!=null?u:function(c,a,h){if(!c)return 0;let F=0;for(const d of c)F=Math.max(F,d.index+1);return F}(t.items):n);var u,l}}class dt{constructor(t,e,o){this.is="SlotHandler",this.ctx=void 0,this.ownerBlock=void 0,this.items=new Set,this.info=void 0,this._lastElement=void 0,this.handlePointerUp=K(s=>{this.ctx.handleSlotPointerUp(this,s)}),this._isActive=!1,this.ctx=t,this.ownerBlock=e,e&&e.slots.add(this),this.info=o}createBlock(t){return this.ctx.createBlock(t,this)}get ref(){return this.info.ref}get isActive(){return this._isActive}get hasFocus(){return this.isActive&&this.ctx.hasFocus}_maybeUpdateActive(t){var e,o;return this._isActive!==t&&(this._isActive=t,(e=(o=this.info).onStatusChange)==null||e.call(o,this),!0)}select(){this.ctx.activeSlot=this,this.ctx.activeBlocks=new Set(this.ctx.options.multipleSelect?this.items:this.items.size?[E(this.items)]:[]),this.ctx.syncActiveElementStatus()}focus(){this.isActive||(this.ctx.activeBlocks.clear(),this.ctx.activeSlot=this,this.ctx.syncActiveElementStatus()),this.ctx.focus()}isDescendantOfBlock(t){let e=this.ownerBlock;for(;e;){var o;if(e===t)return!0;e=(o=e.ownerSlot)==null?void 0:o.ownerBlock}return!1}isDescendantOfSlot(t){var e;let o=(e=this.ownerBlock)==null?void 0:e.ownerSlot;for(;o;){var s;if(o===t)return!0;o=(s=o.ownerBlock)==null?void 0:s.ownerSlot}return!1}getDOMEvents(t,e={}){var o;const s={};return((o=e.isWrapper)==null||o)&&S(s,{pointerUp:this.handlePointerUp}),e.isDraggable&&S(s,this.ctx.dragging.getSlotDOMEventHandlers(this)),L(s,t)}dispose(){var t;let e=!1;this.ctx.slotOfActiveBlocks===this&&(this.ctx.activeBlocks.clear(),e=!0),this.ctx.activeSlot===this&&(this.ctx.activeSlot=null,e=!0),e&&this.ctx.syncActiveElementStatus(),(t=this.ownerBlock)==null||t.slots.delete(this),this.items.forEach(o=>o.dispose()),this.items.clear(),this.info={},this._lastElement=void 0,this.handlePointerUp.revoke()}}function y(i){if(!i||!i.parentNode||typeof i.matches!="function"||i.matches(":disabled"))return!1;if(i.matches("input, textarea, select, a[href], area[href], iframe"))return!0;const t=i.getAttribute("tabindex");return typeof t=="string"&&!isNaN(+t)}const w=document.createElement("style");w.textContent="[data-interactive-blocks-focus-anchor] { outline: 0 }";const vt=function(i,t=(e,o)=>e==o){let e,o=!1;return s=>{o&&t(e,s)||(o=!0,e=s,i(s,e))}}(i=>{const t=i==null?void 0:i.getRootNode();t?t.appendChild(w):w.remove()}),pt={brand:"",deactivateHandlersWhenBlur:!0,navigateWithArrowKeys:!0,handleDeleteKey:!0,multipleSelect:!0,serializeForClipboard:i=>JSON.stringify(i),unserializeForClipboard:i=>JSON.parse(i)};class mt extends M{constructor(t={}){super(),this.options=void 0,this.brand="",this.uuid=`${Date.now().toString(36)}-${Math.random().toString(36)}`,this.dragging=new ht(this),this._activeElement=null,this._setActiveElement=void 0,this.copy=void 0,this.activeBlocks=new Set,this.slotOfActiveBlocks=null,this.activeSlot=null,this.lastActiveSlot=null,this.lastActiveBlocks=void 0,this.isFocusingBlock=void 0,this.isFocusingSlot=void 0,this.focusingElement=void 0,this.handleSlotPointerUp=(s,n)=>{n.eventPhase!==Event.CAPTURING_PHASE&&this.isFocusingSlot||(this.isFocusingSlot=s);const u=n.currentTarget;y(u)&&(this.focusingElement||(this.focusingElement=u),s._lastElement=u)},this.handleBlockPointerUp=(s,n)=>{n.eventPhase!==Event.CAPTURING_PHASE&&this.isFocusingBlock||(this.isFocusingBlock=s);const u=n.currentTarget;y(u)&&(this.focusingElement||(this.focusingElement=u),s._lastElement=u)},this.handleGlobalPointerUp=s=>{const n=this.isFocusingBlock,u=this.isFocusingSlot,l=this.focusingElement;if(this.isFocusingBlock=void 0,this.isFocusingSlot=void 0,this.focusingElement=void 0,n?(this.activeSlot=u||null,this.addBlockToSelection(n,s)):(this.activeSlot=u||null,this.options.deactivateHandlersWhenBlur&&this.activeBlocks.size>0&&this.activeBlocks.clear()),this.syncActiveElementStatus(),l){const c=l.getRootNode==null?void 0:l.getRootNode();(c==null?void 0:c.activeElement)===l&&this._setActiveElement(l)}},this.options=D({},pt,t),this.brand=String(this.options.brand),document.addEventListener("pointerup",this.handleGlobalPointerUp,!1);const e={cut:s=>{o(s),this.deleteActiveBlocks()},copy:s=>{o(s)},paste:s=>{s.preventDefault();try{var n;const u=(n=s.clipboardData)==null?void 0:n.getData("text/plain");if(!u)return;const l=this.options.unserializeForClipboard(u);this.pasteWithData(l)}catch(u){console.error("Failed to paste!",u)}},blur:s=>{s.relatedTarget!==this._activeElement&&this._setActiveElement(null)},keydown:s=>{const n=this.options,u=s.code;let l=!1;var c,a;u==="KeyA"&&n.multipleSelect&&(s.ctrlKey||s.metaKey)&&(l=!0,this.activeBlocks=new Set(Array.from(((c=this.slotOfActiveBlocks)==null?void 0:c.items)||((a=this.activeSlot)==null?void 0:a.items)||[]).sort((h,F)=>h.index-F.index)),this.syncActiveElementStatus()),!n.navigateWithArrowKeys||u!=="ArrowUp"&&u!=="ArrowDown"||!n.multipleSelect&&(s.shiftKey||s.ctrlKey||s.metaKey)||(l=!0,this.activeNextBlock(u==="ArrowDown"?1:-1,s.shiftKey||s.ctrlKey||s.metaKey),this.focus()),n.navigateWithArrowKeys&&u==="ArrowLeft"&&(l=!0,this.activeParentBlock(),this.focus()),n.navigateWithArrowKeys&&u==="ArrowRight"&&(l=!0,this.activeChildrenBlocks(),this.focus()),!n.handleDeleteKey||u!=="Delete"&&u!=="Backspace"||(l=!0,this.deleteActiveBlocks(),this.focus()),l?s.preventDefault():this.emit("keydown",s,this)}};this._setActiveElement=s=>{const n=this._activeElement,u=s;if(this._activeElement=s,n==null||n.removeAttribute("data-interactive-blocks-focus-anchor"),u==null||u.setAttribute("data-interactive-blocks-focus-anchor",""),!!n==!!u)return;const l=u?"addEventListener":"removeEventListener";var c;Object.keys(e).forEach(a=>{document.body[l](a,e[a],!0)}),u?this.emit("focus",this):(this.emit("blur",this),this.activeBlocks.forEach(a=>a.info.onStatusChange==null?void 0:a.info.onStatusChange(a)),(c=this.activeSlot)==null||c.info.onStatusChange==null||c.info.onStatusChange(this.activeSlot)),vt(u)},this.copy=()=>{const s=this.hasFocus;s||document.body.addEventListener("copy",e.copy,!0),document.execCommand("copy"),s||document.body.removeEventListener("copy",e.copy,!0)};const o=s=>{var n;const u=this.options.serializeForClipboard(this.dumpSelectedData());u&&(s.stopImmediatePropagation(),s.preventDefault(),(n=s.clipboardData)==null||n.setData("text/plain",u))}}get hasFocus(){return!!this._activeElement}focus(){var t,e;const o=[(t=E(this.activeBlocks))==null?void 0:t._lastElement,(e=this.activeSlot)==null?void 0:e._lastElement].find(y)||this._activeElement||document.activeElement||document.body;this._activeElement!==o&&(this._setActiveElement(o),o.focus())}dumpSelectedData(){const t={isIBClipboardData:!0,ibContextBrand:this.brand,ibContextUUID:this.uuid,blocksData:[]};if(this.activeBlocks.forEach(e=>{t.blocksData.push(e.data)}),t.blocksData.length!==0)return t}pasteWithData(t,e){if(!Z(t,this.brand))throw new Error("Need a valid IBClipboardData object");const o=this.activeSlot;if(!o)return;const s=E(this.activeBlocks),n=e!=null?e:o===(s==null?void 0:s.ownerSlot)?s.index:Math.max(0,...Array.from(o.items.values(),l=>1+l.index)),u=new tt({type:"paste",ctx:this,data:t,slot:o,index:n});o.info.onPaste==null||o.info.onPaste(u),this.emit("paste",u),u.returnValue!==!1&&setTimeout(()=>{const l=t.blocksData.length+n-1,c=Array.from(o.items).filter(a=>a.index>=n&&a.index<=l);c.length&&(this.activeSlot=o,this.activeBlocks.clear(),c.forEach(a=>this.activeBlocks.add(a)),this.syncActiveElementStatus())},100)}deleteActiveBlocks(){var t;const e=Array.from(this.activeBlocks.values()),o=(t=e[0])==null?void 0:t.ownerSlot;if(!o)return!1;const s=e[0].index,n=Array.from(e,l=>l.index),u=new et({type:"cut",blocks:e,indexes:n,indexesDescending:n.slice().sort((l,c)=>c-l),ctx:this,slot:o});if(o.info.onCut==null||o.info.onCut(u),this.emit("cut",u),u.returnValue){const l=W(o.items,c=>c.index===s);l&&this.addBlockToSelection(l)}return u.returnValue}activeNextBlock(t,e=!1){const o=e&&this.options.multipleSelect;let s=!0,n=Array.from(this.activeBlocks);var u;if(!n.length&&(n=Array.from(((u=this.activeSlot)==null?void 0:u.items)||[]),s=!1,!n.length))return;const l=n[0].ownerSlot;let c=n[0].index,a=c,h=n[0],F=h;n.slice(1).forEach(v=>{if(v.ownerSlot!==l)return;const f=v.index;f>c&&(c=f,h=v),f<a&&(a=f,F=v)});const d=t>0?c+t:a+t,p=W(l==null?void 0:l.items,v=>v.index===d);p?(o||this.activeBlocks.clear(),this.activeBlocks.add(p),this.activeSlot=l,this.syncActiveElementStatus()):s?o||(this.activeBlocks.clear(),n.length>1&&this.activeBlocks.add(t>0?h:F),this.syncActiveElementStatus()):(this.activeBlocks.clear(),o?n.forEach(v=>this.activeBlocks.add(v)):this.activeBlocks.add(t>0?F:h),this.syncActiveElementStatus())}activeParentBlock(){var t;const e=(t=this.activeSlot)==null?void 0:t.ownerBlock;e&&(this.activeSlot=e.ownerSlot||this.activeSlot,this.activeBlocks.clear(),this.activeBlocks.add(e),this.syncActiveElementStatus())}activeChildrenBlocks(){const t=E(this.activeBlocks),e=E(t==null?void 0:t.slots);e&&e.select()}syncActiveElementStatus(){var t;let e=!1;const o=this.lastActiveBlocks,s=this.lastActiveSlot,n=Array.from(this.activeBlocks),u=((t=n[0])==null?void 0:t.ownerSlot)||null;var l;n.length>1&&u!==this.activeSlot&&(this.activeSlot=u),!this.activeSlot&&u&&(this.activeSlot=u),n.forEach((c,a)=>{o==null||o.delete(c),e=c._maybeUpdateActiveNumber(a)||e}),o==null||o.forEach(c=>{e=c._maybeUpdateActiveNumber(!1)||e}),this.activeSlot!==s&&(s==null||s._maybeUpdateActive(!1),(l=this.activeSlot)==null||l._maybeUpdateActive(!0),this.lastActiveSlot=this.activeSlot,e=!0),this.lastActiveBlocks=new Set(this.activeBlocks),this.slotOfActiveBlocks=u,e&&(this.emit("activeElementChanged",this),this.activeBlocks.size||this.activeSlot||!this.hasFocus||this._setActiveElement(null))}clearSelection(){this.activeBlocks.clear(),this.activeSlot=null,this.syncActiveElementStatus()}addBlockToSelection(t,e){var o;if(e=(o=e)?o===!0?"ctrl":typeof o=="object"?o.ctrlKey||o.metaKey?"ctrl":o.shiftKey?"shift":"none":o==="ctrl"?"ctrl":o==="shift"?"shift":"none":"none",this.options.multipleSelect||(e="none"),e==="none")this.activeBlocks.clear(),this.activeBlocks.add(t);else{const s=E(this.activeBlocks);if(s&&s.ownerSlot!==t.ownerSlot){const n=[];for(let l=s;l&&l.ownerSlot;)n.push(l.ownerSlot),l=l.ownerSlot.ownerBlock;let u=-1;for(let l=t;l&&l.ownerSlot;l=l.ownerSlot.ownerBlock)if((u=n.indexOf(l.ownerSlot))!==-1){t=l;break}u===-1?this.activeBlocks.clear():u>0&&(this.activeBlocks=new Set(Array.from(this.activeBlocks,l=>{for(let c=u;c>0;c--,l=l.ownerSlot.ownerBlock);return l})))}this.activeSlot=t.ownerSlot||null,this.activeSlot||(e="ctrl")}if(e==="ctrl"&&(this.activeBlocks.has(t)?this.activeBlocks.delete(t):this.activeBlocks.add(t)),e==="shift"){const s=this.activeSlot,n=t.index;let u=n,l=n;this.activeBlocks.forEach(c=>{const a=c.index;u>a&&(u=a),l<a&&(l=a)}),this.activeBlocks=new Set(Array.from(s.items).filter(c=>{const a=c.index;return a>=u&&a<=l}).sort((c,a)=>c.index-a.index))}this.syncActiveElementStatus()}dispose(){this._setActiveElement(null),this.dragging.dispose(),document.removeEventListener("pointerup",this.handleGlobalPointerUp,!1)}createBlock(t,e=null){return new ct(this,e,t)}createSlot(t,e=null){return new dt(this,e,t)}}const ft=()=>[{name:"\u{1F9E9} Click to Pick",children:[{name:"\u{1F36C} Alice"},{name:"\u{1F9F8} Bob"}]},{name:"Drag Card into slot \u{1F447}"},{name:"shortcut keys works too"}],gt=i=>{const t=[...i],e={};return{root:t,copiedBlocks:e,getSlotAndBlock(o){let s=t,n=null,u="";return o.forEach(l=>{if(u+=`/${l}`,!(u in e)){const c=s[l],a=N(g({},c),{children:[...c.children||[]]});s[l]=a,e[u]=a}n=e[u],s=n.children}),{slot:s,block:n}}}},Bt=(i,t)=>{if("__demo_wholeReplace__"in t)return t.__demo_wholeReplace__;const e=gt(i),{slot:o,block:s}=e.getSlotAndBlock(t.path);if(t.rename&&s&&(s.name=t.rename.name),t.insert&&o.splice(t.insert.index,0,...t.insert.items),t.remove&&b(o,t.remove.indexes),t.moveInSlot){const{fromIndexes:n,toIndex:u}=t.moveInSlot;rt(o,n,u)}if(t.moveBetweenSlots){const{fromPath:n,fromIndexes:u,toIndex:l}=t.moveBetweenSlots,c=e.getSlotAndBlock(n).slot;lt(c,u,o,l)}return console.log("store reducer called",t,e),e.root},j=r.exports.createContext(null),xt=i=>{const t=r.exports.useReducer(Bt,null,ft);return r.exports.createElement(j.Provider,{value:t},i.children)},k=()=>r.exports.useContext(j),_=r.exports.createContext(null),P=r.exports.createContext(null),H=r.exports.createContext(null),Et=r.exports.memo(i=>{const t=r.exports.useRef(i),e=r.exports.useMemo(()=>new mt(i.options),[]);return t.current=i,r.exports.useEffect(()=>{var o,s;return(s=(o=t.current)===null||o===void 0?void 0:o.onMount)===null||s===void 0||s.call(o,e),()=>{var n,u;(u=(n=t.current)===null||n===void 0?void 0:n.onUnmount)===null||u===void 0||u.call(n,e),e.dispose()}},[]),r.exports.createElement(_.Provider,{value:e},r.exports.createElement(H.Provider,{value:null},r.exports.createElement(P.Provider,{value:null},i.children)))});function kt(i){const t=r.exports.useContext(_),e=r.exports.useContext(H);if(!t)throw new Error("No interactive-block BlockContext");const o=r.exports.useMemo(()=>{const n=e||t,u=i();return n.createSlot(u)},[]);return r.exports.useEffect(()=>function(){o.dispose()},[o]),r.exports.useMemo(()=>{const n=o.getDOMEvents("react");return{blockContext:t,ownerBlock:e,slotHandler:o,handleSlotPointerUp:n.onPointerUp,divProps:g({tabIndex:-1},n),SlotWrapper:u=>r.exports.createElement(P.Provider,{value:o},u.children)}},[])}function At(i){const t=r.exports.useContext(_),e=r.exports.useContext(P);if(!t)throw new Error("No interactive-block BlockContext");const o=r.exports.useMemo(()=>{const n=e||t,u=i();return n.createBlock(u)},[]);return r.exports.useEffect(()=>function(){o.dispose()},[o]),r.exports.useMemo(()=>{const n=o.getDOMEvents("react");return{blockContext:t,ownerSlot:e,blockHandler:o,handleBlockPointerUp:n.onPointerUp,divProps:g({tabIndex:-1},n),BlockWrapper:u=>r.exports.createElement(H.Provider,{value:o},u.children)}},[])}const $=()=>{const[,i]=r.exports.useReducer(t=>(t+1)%16777215,0);return i},St=i=>g({},i),Ct=i=>g({},i),B=i=>{const t=[];for(;i;)t.unshift(i.index),i=i.ownerSlot.ownerBlock;return t},C=(...i)=>i.filter(t=>!!t).map(t=>Array.isArray(t)?C(t):String(t)).join(" ");function Dt(){const i=["\u{1F604}","\u{1F603}","\u{1F600}","\u{1F60A}","\u263A","\u{1F609}","\u{1F60D}","\u{1F618}","\u{1F61A}","\u{1F617}","\u{1F619}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F633}","\u{1F601}","\u{1F614}","\u{1F60C}","\u{1F612}","\u{1F61E}","\u{1F623}","\u{1F622}","\u{1F602}","\u{1F62D}","\u{1F62A}","\u{1F625}","\u{1F630}","\u{1F605}","\u{1F613}","\u{1F629}","\u{1F62B}","\u{1F628}","\u{1F631}","\u{1F620}","\u{1F621}","\u{1F624}","\u{1F616}","\u{1F606}","\u{1F60B}","\u{1F637}","\u{1F60E}","\u{1F634}","\u{1F635}","\u{1F632}","\u{1F61F}","\u{1F626}","\u{1F627}","\u{1F608}","\u{1F47F}","\u{1F62E}","\u{1F62C}","\u{1F610}","\u{1F615}","\u{1F62F}","\u{1F636}","\u{1F607}","\u{1F60F}","\u{1F611}","\u{1F472}","\u{1F473}","\u{1F46E}","\u{1F477}","\u{1F482}","\u{1F476}","\u{1F466}","\u{1F467}","\u{1F468}","\u{1F469}","\u{1F474}","\u{1F475}","\u{1F471}","\u{1F47C}","\u{1F478}","\u{1F63A}","\u{1F638}","\u{1F63B}","\u{1F63D}","\u{1F63C}","\u{1F640}","\u{1F63F}","\u{1F639}","\u{1F63E}","\u{1F479}","\u{1F47A}","\u{1F648}","\u{1F649}","\u{1F64A}","\u{1F480}","\u{1F47D}","\u{1F4A9}","\u{1F525}","\u2728","\u{1F31F}","\u{1F4AB}","\u{1F4A5}","\u{1F4A2}","\u{1F4A6}","\u{1F4A7}","\u{1F4A4}","\u{1F4A8}","\u{1F442}","\u{1F440}","\u{1F443}","\u{1F445}","\u{1F444}","\u{1F44D}","\u{1F44E}","\u{1F44C}","\u{1F44A}","\u270A","\u270C","\u{1F44B}","\u270B","\u{1F450}","\u{1F446}","\u{1F447}","\u{1F449}","\u{1F448}","\u{1F64C}","\u{1F64F}","\u261D","\u{1F44F}","\u{1F4AA}","\u{1F6B6}","\u{1F3C3}","\u{1F483}","\u{1F46B}","\u{1F46A}","\u{1F46C}","\u{1F46D}","\u{1F48F}","\u{1F491}","\u{1F46F}","\u{1F646}","\u{1F645}","\u{1F481}","\u{1F64B}","\u{1F486}","\u{1F487}","\u{1F485}","\u{1F470}","\u{1F64E}","\u{1F64D}","\u{1F647}","\u{1F3A9}","\u{1F451}","\u{1F452}","\u{1F45F}","\u{1F45E}","\u{1F461}","\u{1F460}","\u{1F462}","\u{1F455}","\u{1F454}","\u{1F45A}","\u{1F457}","\u{1F3BD}","\u{1F456}","\u{1F458}","\u{1F459}","\u{1F4BC}","\u{1F45C}","\u{1F45D}","\u{1F45B}","\u{1F453}","\u{1F380}","\u{1F302}","\u{1F484}","\u{1F49B}","\u{1F499}","\u{1F49C}","\u{1F49A}","\u2764","\u{1F494}","\u{1F497}","\u{1F493}","\u{1F495}","\u{1F496}","\u{1F49E}","\u{1F498}","\u{1F48C}","\u{1F48B}","\u{1F48D}","\u{1F48E}","\u{1F464}","\u{1F465}","\u{1F4AC}","\u{1F463}","\u{1F4AD}","\u{1F436}","\u{1F43A}","\u{1F431}","\u{1F42D}","\u{1F439}","\u{1F430}","\u{1F438}","\u{1F42F}","\u{1F428}","\u{1F43B}","\u{1F437}","\u{1F43D}","\u{1F42E}","\u{1F417}","\u{1F435}","\u{1F412}","\u{1F434}","\u{1F411}","\u{1F418}","\u{1F43C}","\u{1F427}","\u{1F426}","\u{1F424}","\u{1F425}","\u{1F423}","\u{1F414}","\u{1F40D}","\u{1F422}","\u{1F41B}","\u{1F41D}","\u{1F41C}","\u{1F41E}","\u{1F40C}","\u{1F419}","\u{1F41A}","\u{1F420}","\u{1F41F}","\u{1F42C}","\u{1F433}","\u{1F40B}","\u{1F404}","\u{1F40F}","\u{1F400}","\u{1F403}","\u{1F405}","\u{1F407}","\u{1F409}","\u{1F40E}","\u{1F410}","\u{1F413}","\u{1F415}","\u{1F416}","\u{1F401}","\u{1F402}","\u{1F432}","\u{1F421}","\u{1F40A}","\u{1F42B}","\u{1F42A}","\u{1F406}","\u{1F408}","\u{1F429}","\u{1F43E}","\u{1F490}","\u{1F338}","\u{1F337}","\u{1F340}","\u{1F339}","\u{1F33B}","\u{1F33A}","\u{1F341}","\u{1F343}","\u{1F342}","\u{1F33F}","\u{1F33E}","\u{1F344}","\u{1F335}","\u{1F334}","\u{1F332}","\u{1F333}","\u{1F330}","\u{1F331}","\u{1F33C}","\u{1F310}","\u{1F31E}","\u{1F31D}","\u{1F31A}","\u{1F311}","\u{1F312}","\u{1F313}","\u{1F314}","\u{1F315}","\u{1F316}","\u{1F317}","\u{1F318}","\u{1F31C}","\u{1F31B}","\u{1F319}","\u{1F30D}","\u{1F30E}","\u{1F30F}","\u{1F30B}","\u{1F30C}","\u{1F320}","\u2B50","\u2600","\u26C5","\u2601","\u26A1","\u2614","\u2744","\u26C4","\u{1F300}","\u{1F301}","\u{1F308}","\u{1F30A}","\u{1F38D}","\u{1F49D}","\u{1F38E}","\u{1F392}","\u{1F393}","\u{1F38F}","\u{1F386}","\u{1F387}","\u{1F390}","\u{1F391}","\u{1F383}","\u{1F47B}","\u{1F385}","\u{1F384}","\u{1F381}","\u{1F38B}","\u{1F389}","\u{1F38A}","\u{1F388}","\u{1F38C}","\u{1F52E}","\u{1F3A5}","\u{1F4F7}","\u{1F4F9}","\u{1F4FC}","\u{1F4BF}","\u{1F4C0}","\u{1F4BD}","\u{1F4BE}","\u{1F4BB}","\u{1F4F1}","\u260E","\u{1F4DE}","\u{1F4DF}","\u{1F4E0}","\u{1F4E1}","\u{1F4FA}","\u{1F4FB}","\u{1F50A}","\u{1F509}","\u{1F508}","\u{1F507}","\u{1F514}","\u{1F515}","\u{1F4E2}","\u{1F4E3}","\u23F3","\u231B","\u23F0","\u231A","\u{1F513}","\u{1F512}","\u{1F50F}","\u{1F510}","\u{1F511}","\u{1F50E}","\u{1F4A1}","\u{1F526}","\u{1F506}","\u{1F505}","\u{1F50C}","\u{1F50B}","\u{1F50D}","\u{1F6C1}","\u{1F6C0}","\u{1F6BF}","\u{1F6BD}","\u{1F527}","\u{1F529}","\u{1F528}","\u{1F6AA}","\u{1F6AC}","\u{1F4A3}","\u{1F52B}","\u{1F52A}","\u{1F48A}","\u{1F489}","\u{1F4B0}","\u{1F4B4}","\u{1F4B5}","\u{1F4B7}","\u{1F4B6}","\u{1F4B3}","\u{1F4B8}","\u{1F4F2}","\u{1F4E7}","\u{1F4E5}","\u{1F4E4}","\u2709","\u{1F4E9}","\u{1F4E8}","\u{1F4EF}","\u{1F4EB}","\u{1F4EA}","\u{1F4EC}","\u{1F4ED}","\u{1F4EE}","\u{1F4E6}","\u{1F4DD}","\u{1F4C4}","\u{1F4C3}","\u{1F4D1}","\u{1F4CA}","\u{1F4C8}","\u{1F4C9}","\u{1F4DC}","\u{1F4CB}","\u{1F4C5}","\u{1F4C6}","\u{1F4C7}","\u{1F4C1}","\u{1F4C2}","\u2702","\u{1F4CC}","\u{1F4CE}","\u2712","\u270F","\u{1F4CF}","\u{1F4D0}","\u{1F4D5}","\u{1F4D7}","\u{1F4D8}","\u{1F4D9}","\u{1F4D3}","\u{1F4D4}","\u{1F4D2}","\u{1F4DA}","\u{1F4D6}","\u{1F516}","\u{1F4DB}","\u{1F52C}","\u{1F52D}","\u{1F4F0}","\u{1F3A8}","\u{1F3AC}","\u{1F3A4}","\u{1F3A7}","\u{1F3BC}","\u{1F3B5}","\u{1F3B6}","\u{1F3B9}","\u{1F3BB}","\u{1F3BA}","\u{1F3B7}","\u{1F3B8}","\u{1F47E}","\u{1F3AE}","\u{1F0CF}","\u{1F3B4}","\u{1F004}","\u{1F3B2}","\u{1F3AF}","\u{1F3C8}","\u{1F3C0}","\u26BD","\u26BE","\u{1F3BE}","\u{1F3B1}","\u{1F3C9}","\u{1F3B3}","\u26F3","\u{1F6B5}","\u{1F6B4}","\u{1F3C1}","\u{1F3C7}","\u{1F3C6}","\u{1F3BF}","\u{1F3C2}","\u{1F3CA}","\u{1F3C4}","\u{1F3A3}","\u2615","\u{1F375}","\u{1F376}","\u{1F37C}","\u{1F37A}","\u{1F37B}","\u{1F378}","\u{1F379}","\u{1F377}","\u{1F374}","\u{1F355}","\u{1F354}","\u{1F35F}","\u{1F357}","\u{1F356}","\u{1F35D}","\u{1F35B}","\u{1F364}","\u{1F371}","\u{1F363}","\u{1F365}","\u{1F359}","\u{1F358}","\u{1F35A}","\u{1F35C}","\u{1F372}","\u{1F362}","\u{1F361}","\u{1F373}","\u{1F35E}","\u{1F369}","\u{1F36E}","\u{1F366}","\u{1F368}","\u{1F367}","\u{1F382}","\u{1F370}","\u{1F36A}","\u{1F36B}","\u{1F36C}","\u{1F36D}","\u{1F36F}","\u{1F34E}","\u{1F34F}","\u{1F34A}","\u{1F34B}","\u{1F352}","\u{1F347}","\u{1F349}","\u{1F353}","\u{1F351}","\u{1F348}","\u{1F34C}","\u{1F350}","\u{1F34D}","\u{1F360}","\u{1F346}","\u{1F345}","\u{1F33D}","\u{1F3E0}","\u{1F3E1}","\u{1F3EB}","\u{1F3E2}","\u{1F3E3}","\u{1F3E5}","\u{1F3E6}","\u{1F3EA}","\u{1F3E9}","\u{1F3E8}","\u{1F492}","\u26EA","\u{1F3EC}","\u{1F3E4}","\u{1F307}","\u{1F306}","\u{1F3EF}","\u{1F3F0}","\u26FA","\u{1F3ED}","\u{1F5FC}","\u{1F5FE}","\u{1F5FB}","\u{1F304}","\u{1F305}","\u{1F303}","\u{1F5FD}","\u{1F309}","\u{1F3A0}","\u{1F3A1}","\u26F2","\u{1F3A2}","\u{1F6A2}","\u26F5","\u{1F6A4}","\u{1F6A3}","\u2693","\u{1F680}","\u2708","\u{1F4BA}","\u{1F681}","\u{1F682}","\u{1F68A}","\u{1F689}","\u{1F69E}","\u{1F686}","\u{1F684}","\u{1F685}","\u{1F688}","\u{1F687}","\u{1F69D}","\u{1F68B}","\u{1F683}","\u{1F68E}","\u{1F68C}","\u{1F68D}","\u{1F699}","\u{1F698}","\u{1F697}","\u{1F695}","\u{1F696}","\u{1F69B}","\u{1F69A}","\u{1F6A8}","\u{1F693}","\u{1F694}","\u{1F692}","\u{1F691}","\u{1F690}","\u{1F6B2}","\u{1F6A1}","\u{1F69F}","\u{1F6A0}","\u{1F69C}","\u{1F488}","\u{1F68F}","\u{1F3AB}","\u{1F6A6}","\u{1F6A5}","\u26A0","\u{1F6A7}","\u{1F530}","\u26FD","\u{1F3EE}","\u{1F3B0}","\u2668","\u{1F5FF}","\u{1F3AA}","\u{1F3AD}","\u{1F4CD}","\u{1F6A9}","\u2B06","\u2B07","\u2B05","\u27A1","\u{1F520}","\u{1F521}","\u{1F524}","\u2197","\u2196","\u2198","\u2199","\u2194","\u2195","\u{1F504}","\u25C0","\u25B6","\u{1F53C}","\u{1F53D}","\u21A9","\u21AA","\u2139","\u23EA","\u23E9","\u23EB","\u23EC","\u2935","\u2934","\u{1F197}","\u{1F500}","\u{1F501}","\u{1F502}","\u{1F195}","\u{1F199}","\u{1F192}","\u{1F193}","\u{1F196}","\u{1F4F6}","\u{1F3A6}","\u{1F201}","\u{1F22F}","\u{1F233}","\u{1F235}","\u{1F234}","\u{1F232}","\u{1F250}","\u{1F239}","\u{1F23A}","\u{1F236}","\u{1F21A}","\u{1F6BB}","\u{1F6B9}","\u{1F6BA}","\u{1F6BC}","\u{1F6BE}","\u{1F6B0}","\u{1F6AE}","\u{1F17F}","\u267F","\u{1F6AD}","\u{1F237}","\u{1F238}","\u{1F202}","\u24C2","\u{1F6C2}","\u{1F6C4}","\u{1F6C5}","\u{1F6C3}","\u{1F251}","\u3299","\u3297","\u{1F191}","\u{1F198}","\u{1F194}","\u{1F6AB}","\u{1F51E}","\u{1F4F5}","\u{1F6AF}","\u{1F6B1}","\u{1F6B3}","\u{1F6B7}","\u{1F6B8}","\u26D4","\u2733","\u2747","\u274E","\u2705","\u2734","\u{1F49F}","\u{1F19A}","\u{1F4F3}","\u{1F4F4}","\u{1F170}","\u{1F171}","\u{1F18E}","\u{1F17E}","\u{1F4A0}","\u27BF","\u267B","\u2648","\u2649","\u264A","\u264B","\u264C","\u264D","\u264E","\u264F","\u2650","\u2651","\u2652","\u2653","\u26CE","\u{1F52F}","\u{1F3E7}","\u{1F4B9}","\u{1F4B2}","\u{1F4B1}","\xA9","\xAE","\u2122","\u303D","\u3030","\u{1F51D}","\u{1F51A}","\u{1F519}","\u{1F51B}","\u{1F51C}","\u274C","\u2B55","\u2757","\u2753","\u2755","\u2754","\u{1F503}","\u{1F55B}","\u{1F567}","\u{1F550}","\u{1F55C}","\u{1F551}","\u{1F55D}","\u{1F552}","\u{1F55E}","\u{1F553}","\u{1F55F}","\u{1F554}","\u{1F560}","\u{1F555}","\u{1F556}","\u{1F557}","\u{1F558}","\u{1F559}","\u{1F55A}","\u{1F561}","\u{1F562}","\u{1F563}","\u{1F564}","\u{1F565}","\u{1F566}","\u2716","\u2795","\u2796","\u2797","\u2660","\u2665","\u2663","\u2666","\u{1F4AE}","\u{1F4AF}","\u2714","\u2611","\u{1F518}","\u{1F517}","\u27B0","\u{1F531}","\u{1F532}","\u{1F533}","\u25FC","\u25FB","\u25FE","\u25FD","\u25AA","\u25AB","\u{1F53A}","\u2B1C","\u2B1B","\u26AB","\u26AA","\u{1F534}","\u{1F535}","\u{1F53B}","\u{1F536}","\u{1F537}","\u{1F538}","\u{1F539}"];return i[Math.floor(Math.random()*i.length)]}const z=r.exports.memo(function(t){var F;const[,e]=k(),o=$(),{ownerBlock:s,blockContext:n,slotHandler:u,SlotWrapper:l}=kt(()=>({onCut:d=>e({path:B(s),remove:{indexes:d.blocks.map(p=>p.index)}}),onPaste:d=>e({path:B(s),insert:{index:d.index,items:d.data.blocksData.map(St)}}),onStatusChange:()=>o(),onDragHoverStatusChange:()=>o(),onMoveInSlot:d=>e({path:B(s),moveInSlot:{fromIndexes:d.blocks.map(p=>p.index),toIndex:d.index}}),onMoveToThisSlot:d=>{var p;return e({path:B(s),moveBetweenSlots:{fromPath:B((p=d.fromSlot)==null?void 0:p.ownerBlock),fromIndexes:d.blocks.map(v=>v.index),toIndex:d.index}})}})),c=r.exports.useMemo(()=>u.getDOMEvents("react",{isDraggable:!0}),[]),{isActive:a,isDragHovering:h}=u;return r.exports.createElement("div",g({className:C("mySlot",a&&"isActive",h&&"isDragHovering"),tabIndex:-1},c),r.exports.createElement(l,null,((F=t.children)==null?void 0:F.length)>0?t.children:r.exports.createElement("div",{className:"mySlot-emptyPlaceholder"},"Empty")),u.isDragHovering&&r.exports.createElement("div",{className:"mySlot-indexToDrop",key:"indexToDrop",style:{gridRowStart:u.indexToDrop+1}},`indexToDrop = ${u.indexToDrop}`))}),bt=r.exports.memo(function i(t){var v;const{index:e,item:o}=t,[,s]=k(),n=$(),u=r.exports.useRef();r.exports.useImperativeHandle(u,()=>({index:e,item:o}),[e,o]);const{blockContext:l,blockHandler:c,BlockWrapper:a}=At(()=>({data:()=>Ct(u.current.item),index:()=>u.current.index,onStatusChange:()=>n()})),h=r.exports.useMemo(()=>c.getDOMEvents("react",{isDraggable:!0}),[]),F=r.exports.useCallback(()=>{var T;const f=B(c),A={name:`${Dt()} ${(~~(Math.random()*1e6+1e6)).toString(16).slice(-4).toUpperCase()}`};s({path:f,insert:{index:((T=o.children)==null?void 0:T.length)||0,items:[A]}})},[c]),{activeNumber:d,isActive:p}=c;return r.exports.createElement(a,null,r.exports.createElement("div",g({className:C("myBlock",p&&"isActive"),tabIndex:-1,draggable:!0},h),p&&r.exports.createElement("div",{className:"myBlock-selectIndex"},d+1),r.exports.createElement(yt,{name:o.name,blockHandler:c}),r.exports.createElement(z,null,((v=o.children)==null?void 0:v.length)?o.children.map((f,A)=>r.exports.createElement(i,{key:A,index:A,item:f})):null,r.exports.createElement("button",{className:"myBlock-addButton",onClick:F},"Create..."))))}),yt=i=>{const[,t]=k(),e=r.exports.useCallback(o=>{const s=i.blockHandler,n=B(s),u=o.currentTarget.value;t({path:n,rename:{name:u}})},[]);return r.exports.createElement("input",{className:"blockNameInput",type:"text",value:i.name,onChange:e})},wt=()=>{const[i,t]=k(),e=r.exports.useRef(null);r.exports.useEffect(()=>{e.current.value=JSON.stringify(i,null,2)},[i]);const o=r.exports.useRef(null);o.current=i;const s=r.exports.useCallback((l=!0)=>{try{const c=JSON.parse(e.current.value);t({path:[],__demo_wholeReplace__:c})}catch(c){l&&(e.current.value=JSON.stringify(o.current,null,2)),console.error("Failed to replace: ",c)}},[]),n=r.exports.useCallback(()=>s(!0),[]),u=r.exports.useCallback(()=>s(!1),[]);return r.exports.createElement("div",null,r.exports.createElement("h3",null,"How to Play"),r.exports.createElement("ol",null,r.exports.createElement("li",null,"click to ",r.exports.createElement("b",null,"pick block & slot")),r.exports.createElement("li",null,r.exports.createElement("b",null,"multiple-select")," with ",r.exports.createElement("kbd",null,"Ctrl")," or ",r.exports.createElement("kbd",null,"Shift")),r.exports.createElement("li",null,r.exports.createElement("b",null,"navigate")," with arrow keys"),r.exports.createElement("li",null,r.exports.createElement("b",null,"copy, cut, paste")," with ",r.exports.createElement("kbd",null,"Ctrl+C")," / ",r.exports.createElement("kbd",null,"Ctrl+X")," / ",r.exports.createElement("kbd",null,"Ctrl+V")),r.exports.createElement("li",null,"Drag and drop. Also supports cross-window dragging.")),r.exports.createElement("h3",null,"Current Data"),r.exports.createElement("textarea",{className:"demoPage-store",spellCheck:!1,ref:e,onBlur:n,onInput:u}))},_t=function(){const[i]=k(),[t,e]=r.exports.useState(!1),o=r.exports.useCallback(s=>{s.on("focus",()=>e(!0)),s.on("blur",()=>e(!1)),s.on("paste",n=>{console.log("pasting...",n)}),window.blockContext=s},[]);return r.exports.createElement(Et,{onMount:o},Tt,r.exports.createElement("div",{className:C("demoPage",t&&"hasFocus")},r.exports.createElement("div",{className:"demoPage-introductionArea"},r.exports.createElement(wt,null)),r.exports.createElement("div",{className:"demoPage-blockArea"},r.exports.createElement(z,null,i.map((s,n)=>r.exports.createElement(bt,{key:n,index:n,item:s}))))))},Pt="https://github.com/lyonbot/interactive-blocks",Ht="https://lyonbot.github.io/interactive-blocks/docs/",Tt=r.exports.createElement(r.exports.Fragment,null,r.exports.createElement("h2",null,"InteractiveBlocks"),r.exports.createElement("p",null,"Just proving the abilities with shabby Slot and Block components here."),r.exports.createElement("p",null,"Learn how to integrate with your own components? ",r.exports.createElement("a",{href:Ht,target:"_blank"},"Read the Document \xBB")),r.exports.createElement("a",{className:"demoPage-forkMe",href:Pt,target:"_blank"},"Fork me on GitHub")),It=document.getElementById("app"),Ot=q(It);Ot.render(r.exports.createElement(xt,null,r.exports.createElement(_t,null)));
