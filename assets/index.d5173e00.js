var yt=Object.defineProperty,kt=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var be=(o,e,t)=>e in o?yt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,O=(o,e)=>{for(var t in e||(e={}))xt.call(e,t)&&be(o,t,e[t]);if(ke)for(var t of ke(e))St.call(e,t)&&be(o,t,e[t]);return o},xe=(o,e)=>kt(o,bt(e));const wt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};wt();var ee,f,Je,j,Xe,Se,qe,X={},Ge=[],Bt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function T(o,e){for(var t in e)o[t]=e[t];return o}function Ze(o){var e=o.parentNode;e&&e.removeChild(o)}function m(o,e,t){var n,r,i,s={};for(i in e)i=="key"?n=e[i]:i=="ref"?r=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?ee.call(arguments,2):t),typeof o=="function"&&o.defaultProps!=null)for(i in o.defaultProps)s[i]===void 0&&(s[i]=o.defaultProps[i]);return Y(o,s,n,r,null)}function Y(o,e,t,n,r){var i={type:o,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++Je:r};return r==null&&f.vnode!=null&&f.vnode(i),i}function A(o){return o.children}function w(o,e){this.props=o,this.context=e}function L(o,e){if(e==null)return o.__?L(o.__,o.__.__k.indexOf(o)+1):null;for(var t;e<o.__k.length;e++)if((t=o.__k[e])!=null&&t.__e!=null)return t.__e;return typeof o.type=="function"?L(o):null}function Qe(o){var e,t;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,e=0;e<o.__k.length;e++)if((t=o.__k[e])!=null&&t.__e!=null){o.__e=o.__c.base=t.__e;break}return Qe(o)}}function se(o){(!o.__d&&(o.__d=!0)&&j.push(o)&&!q.__r++||Se!==f.debounceRendering)&&((Se=f.debounceRendering)||Xe)(q)}function q(){for(var o;q.__r=j.length;)o=j.sort(function(e,t){return e.__v.__b-t.__v.__b}),j=[],o.some(function(e){var t,n,r,i,s,u;e.__d&&(s=(i=(t=e).__v).__e,(u=t.__P)&&(n=[],(r=T({},i)).__v=i.__v+1,ue(u,i,r,t.__n,u.ownerSVGElement!==void 0,i.__h!=null?[s]:null,n,s==null?L(i):s,i.__h),nt(n,i),i.__e!=s&&Qe(i)))})}function et(o,e,t,n,r,i,s,u,d,_){var c,v,l,a,h,g,y,p=n&&n.__k||Ge,k=p.length;for(t.__k=[],c=0;c<e.length;c++)if((a=t.__k[c]=(a=e[c])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?Y(null,a,null,null,a):Array.isArray(a)?Y(A,{children:a},null,null,null):a.__b>0?Y(a.type,a.props,a.key,null,a.__v):a)!=null){if(a.__=t,a.__b=t.__b+1,(l=p[c])===null||l&&a.key==l.key&&a.type===l.type)p[c]=void 0;else for(v=0;v<k;v++){if((l=p[v])&&a.key==l.key&&a.type===l.type){p[v]=void 0;break}l=null}ue(o,a,l=l||X,r,i,s,u,d,_),h=a.__e,(v=a.ref)&&l.ref!=v&&(y||(y=[]),l.ref&&y.push(l.ref,null,a),y.push(v,a.__c||h,a)),h!=null?(g==null&&(g=h),typeof a.type=="function"&&a.__k===l.__k?a.__d=d=tt(a,d,o):d=ot(o,a,l,p,h,d),typeof t.type=="function"&&(t.__d=d)):d&&l.__e==d&&d.parentNode!=o&&(d=L(l))}for(t.__e=g,c=k;c--;)p[c]!=null&&(typeof t.type=="function"&&p[c].__e!=null&&p[c].__e==t.__d&&(t.__d=L(n,c+1)),rt(p[c],p[c]));if(y)for(c=0;c<y.length;c++)it(y[c],y[++c],y[++c])}function tt(o,e,t){for(var n,r=o.__k,i=0;r&&i<r.length;i++)(n=r[i])&&(n.__=o,e=typeof n.type=="function"?tt(n,e,t):ot(t,n,n,r,n.__e,e));return e}function G(o,e){return e=e||[],o==null||typeof o=="boolean"||(Array.isArray(o)?o.some(function(t){G(t,e)}):e.push(o)),e}function ot(o,e,t,n,r,i){var s,u,d;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(t==null||r!=i||r.parentNode==null)e:if(i==null||i.parentNode!==o)o.appendChild(r),s=null;else{for(u=i,d=0;(u=u.nextSibling)&&d<n.length;d+=2)if(u==r)break e;o.insertBefore(r,i),s=i}return s!==void 0?s:r.nextSibling}function At(o,e,t,n,r){var i;for(i in t)i==="children"||i==="key"||i in e||Z(o,i,null,t[i],n);for(i in e)r&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||t[i]===e[i]||Z(o,i,e[i],t[i],n)}function we(o,e,t){e[0]==="-"?o.setProperty(e,t):o[e]=t==null?"":typeof t!="number"||Bt.test(e)?t:t+"px"}function Z(o,e,t,n,r){var i;e:if(e==="style")if(typeof t=="string")o.style.cssText=t;else{if(typeof n=="string"&&(o.style.cssText=n=""),n)for(e in n)t&&e in t||we(o.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||we(o.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in o?e.toLowerCase().slice(2):e.slice(2),o.l||(o.l={}),o.l[e+i]=t,t?n||o.addEventListener(e,i?Ae:Be,i):o.removeEventListener(e,i?Ae:Be,i);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in o)try{o[e]=t==null?"":t;break e}catch{}typeof t=="function"||(t!=null&&(t!==!1||e[0]==="a"&&e[1]==="r")?o.setAttribute(e,t):o.removeAttribute(e))}}function Be(o){this.l[o.type+!1](f.event?f.event(o):o)}function Ae(o){this.l[o.type+!0](f.event?f.event(o):o)}function ue(o,e,t,n,r,i,s,u,d){var _,c,v,l,a,h,g,y,p,k,B,b=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(d=t.__h,u=e.__e=t.__e,e.__h=null,i=[u]),(_=f.__b)&&_(e);try{e:if(typeof b=="function"){if(y=e.props,p=(_=b.contextType)&&n[_.__c],k=_?p?p.props.value:_.__:n,t.__c?g=(c=e.__c=t.__c).__=c.__E:("prototype"in b&&b.prototype.render?e.__c=c=new b(y,k):(e.__c=c=new w(y,k),c.constructor=b,c.render=Et),p&&p.sub(c),c.props=y,c.state||(c.state={}),c.context=k,c.__n=n,v=c.__d=!0,c.__h=[]),c.__s==null&&(c.__s=c.state),b.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=T({},c.__s)),T(c.__s,b.getDerivedStateFromProps(y,c.__s))),l=c.props,a=c.state,v)b.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(b.getDerivedStateFromProps==null&&y!==l&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,k),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,k)===!1||e.__v===t.__v){c.props=y,c.state=c.__s,e.__v!==t.__v&&(c.__d=!1),c.__v=e,e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(C){C&&(C.__=e)}),c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,k),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(l,a,h)})}c.context=k,c.props=y,c.state=c.__s,(_=f.__r)&&_(e),c.__d=!1,c.__v=e,c.__P=o,_=c.render(c.props,c.state,c.context),c.state=c.__s,c.getChildContext!=null&&(n=T(T({},n),c.getChildContext())),v||c.getSnapshotBeforeUpdate==null||(h=c.getSnapshotBeforeUpdate(l,a)),B=_!=null&&_.type===A&&_.key==null?_.props.children:_,et(o,Array.isArray(B)?B:[B],e,t,n,r,i,s,u,d),c.base=e.__e,e.__h=null,c.__h.length&&s.push(c),g&&(c.__E=c.__=null),c.__e=!1}else i==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=Dt(t.__e,e,t,n,r,i,s,d);(_=f.diffed)&&_(e)}catch(C){e.__v=null,(d||i!=null)&&(e.__e=u,e.__h=!!d,i[i.indexOf(u)]=null),f.__e(C,e,t)}}function nt(o,e){f.__c&&f.__c(e,o),o.some(function(t){try{o=t.__h,t.__h=[],o.some(function(n){n.call(t)})}catch(n){f.__e(n,t.__v)}})}function Dt(o,e,t,n,r,i,s,u){var d,_,c,v=t.props,l=e.props,a=e.type,h=0;if(a==="svg"&&(r=!0),i!=null){for(;h<i.length;h++)if((d=i[h])&&"setAttribute"in d==!!a&&(a?d.localName===a:d.nodeType===3)){o=d,i[h]=null;break}}if(o==null){if(a===null)return document.createTextNode(l);o=r?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,l.is&&l),i=null,u=!1}if(a===null)v===l||u&&o.data===l||(o.data=l);else{if(i=i&&ee.call(o.childNodes),_=(v=t.props||X).dangerouslySetInnerHTML,c=l.dangerouslySetInnerHTML,!u){if(i!=null)for(v={},h=0;h<o.attributes.length;h++)v[o.attributes[h].name]=o.attributes[h].value;(c||_)&&(c&&(_&&c.__html==_.__html||c.__html===o.innerHTML)||(o.innerHTML=c&&c.__html||""))}if(At(o,l,v,r,u),c)e.__k=[];else if(h=e.props.children,et(o,Array.isArray(h)?h:[h],e,t,n,r&&a!=="foreignObject",i,s,i?i[0]:t.__k&&L(t,0),u),i!=null)for(h=i.length;h--;)i[h]!=null&&Ze(i[h]);u||("value"in l&&(h=l.value)!==void 0&&(h!==o.value||a==="progress"&&!h||a==="option"&&h!==v.value)&&Z(o,"value",h,v.value,!1),"checked"in l&&(h=l.checked)!==void 0&&h!==o.checked&&Z(o,"checked",h,v.checked,!1))}return o}function it(o,e,t){try{typeof o=="function"?o(e):o.current=e}catch(n){f.__e(n,t)}}function rt(o,e,t){var n,r;if(f.unmount&&f.unmount(o),(n=o.ref)&&(n.current&&n.current!==o.__e||it(n,null,e)),(n=o.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){f.__e(i,e)}n.base=n.__P=null}if(n=o.__k)for(r=0;r<n.length;r++)n[r]&&rt(n[r],e,typeof o.type!="function");t||o.__e==null||Ze(o.__e),o.__e=o.__d=void 0}function Et(o,e,t){return this.constructor(o,t)}function Ct(o,e,t){var n,r,i;f.__&&f.__(o,e),r=(n=typeof t=="function")?null:t&&t.__k||e.__k,i=[],ue(e,o=(!n&&t||e).__k=m(A,null,[o]),r||X,X,e.ownerSVGElement!==void 0,!n&&t?[t]:r?null:e.firstChild?ee.call(e.childNodes):null,i,!n&&t?t:r?r.__e:e.firstChild,n),nt(i,o)}function de(o,e){var t={__c:e="__cC"+qe++,__:o,Consumer:function(n,r){return n.children(r)},Provider:function(n){var r,i;return this.getChildContext||(r=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&r.some(se)},this.sub=function(s){r.push(s);var u=s.componentWillUnmount;s.componentWillUnmount=function(){r.splice(r.indexOf(s),1),u&&u.call(s)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}ee=Ge.slice,f={__e:function(o,e,t,n){for(var r,i,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(o)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(o,n||{}),s=r.__d),s)return r.__E=r}catch(u){o=u}throw o}},Je=0,w.prototype.setState=function(o,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=T({},this.state),typeof o=="function"&&(o=o(T({},t),this.props)),o&&T(t,o),o!=null&&this.__v&&(e&&this.__h.push(e),se(this))},w.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),se(this))},w.prototype.render=A,j=[],Xe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q.__r=0,qe=0;var W,S,De,M=0,st=[],Ee=f.__b,Ce=f.__r,Pe=f.diffed,Te=f.__c,$e=f.unmount;function K(o,e){f.__h&&f.__h(S,o,M||e),M=0;var t=S.__H||(S.__H={__:[],__h:[]});return o>=t.__.length&&t.__.push({}),t.__[o]}function Pt(o){return M=1,he(lt,o)}function he(o,e,t){var n=K(W++,2);return n.t=o,n.__c||(n.__=[t?t(e):lt(void 0,e),function(r){var i=n.t(n.__[0],r);n.__[0]!==i&&(n.__=[i,n.__[1]],n.__c.setState({}))}],n.__c=S),n.__}function _e(o,e){var t=K(W++,3);!f.__s&&pe(t.__H,e)&&(t.__=o,t.__H=e,S.__H.__h.push(t))}function Tt(o,e){var t=K(W++,4);!f.__s&&pe(t.__H,e)&&(t.__=o,t.__H=e,S.__h.push(t))}function Q(o){return M=5,$(function(){return{current:o}},[])}function $t(o,e,t){M=6,Tt(function(){return typeof o=="function"?(o(e()),function(){return o(null)}):o?(o.current=e(),function(){return o.current=null}):void 0},t==null?t:t.concat(o))}function $(o,e){var t=K(W++,7);return pe(t.__H,e)&&(t.__=o(),t.__H=e,t.__h=o),t.__}function F(o,e){return M=8,$(function(){return o},e)}function fe(o){var e=S.context[o.__c],t=K(W++,9);return t.c=o,e?(t.__==null&&(t.__=!0,e.sub(S)),e.props.value):o.__}function Ht(){for(var o;o=st.shift();)if(o.__P)try{o.__H.__h.forEach(J),o.__H.__h.forEach(le),o.__H.__h=[]}catch(e){o.__H.__h=[],f.__e(e,o.__v)}}f.__b=function(o){S=null,Ee&&Ee(o)},f.__r=function(o){Ce&&Ce(o),W=0;var e=(S=o.__c).__H;e&&(e.__h.forEach(J),e.__h.forEach(le),e.__h=[])},f.diffed=function(o){Pe&&Pe(o);var e=o.__c;e&&e.__H&&e.__H.__h.length&&(st.push(e)!==1&&De===f.requestAnimationFrame||((De=f.requestAnimationFrame)||function(t){var n,r=function(){clearTimeout(i),He&&cancelAnimationFrame(n),setTimeout(t)},i=setTimeout(r,100);He&&(n=requestAnimationFrame(r))})(Ht)),S=null},f.__c=function(o,e){e.some(function(t){try{t.__h.forEach(J),t.__h=t.__h.filter(function(n){return!n.__||le(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],f.__e(n,t.__v)}}),Te&&Te(o,e)},f.unmount=function(o){$e&&$e(o);var e,t=o.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{J(n)}catch(r){e=r}}),e&&f.__e(e,t.__v))};var He=typeof requestAnimationFrame=="function";function J(o){var e=S,t=o.__c;typeof t=="function"&&(o.__c=void 0,t()),S=e}function le(o){var e=S;o.__c=o.__(),S=e}function pe(o,e){return!o||o.length!==e.length||e.some(function(t,n){return t!==o[n]})}function lt(o,e){return typeof e=="function"?e(o):e}function ce(){return ce=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},ce.apply(this,arguments)}const Oe=(o,e,t)=>{const n=o._listeners;n[e]?n[e].push(t):n[e]=[t]};class ct{constructor(){this._listeners={}}on(e,t){return Oe(this,e,{listener:t}),this}once(e,t){return Oe(this,e,{listener:t,once:!0}),this}off(e,t){const n=this._listeners[e];if(!n)return this;if(n.length===1&&t===n[0].listener)return this._listeners[e]=null,this;const r=n.findIndex(i=>i.listener===t);return r!==-1&&n.splice(r,1),this}emit(e,...t){const n=this._listeners[e];if(!n)return;let r=!1;n.forEach(i=>{i.listener(t),i.once&&(r=!0)}),r&&(this._listeners[e]=n.filter(i=>!i.once))}removeAllListeners(){return this._listeners={},this}}function Ot(o,e){return!(typeof o!="object"||!o||o.isIBClipboardData!==!0||typeof e=="string"&&e!==o.ibContextBrand||typeof o.ibContextBrand!="string"||"ibContextUUID"in o&&typeof o.ibContextUUID!="string"||!Array.isArray(o.blocksData)||o.blocksData.some(t=>typeof t!="object"||t===null))}const z=()=>function(o){Object.assign(this,o),this.returnValue=!0,this.preventDefault=()=>{this.returnValue=!1}},It=z(),Ut=z(),Nt=z(),Ft=z(),Lt=z(),Mt=z(),Ie=(o,e)=>typeof o=="function"?o(e):o;class Wt{get activeNumber(){return this._activeNumber}get isActive(){return this._activeNumber!==!1}get ref(){return this.info.ref}_maybeUpdateActiveNumber(e){var t,n;return this._activeNumber!==e&&(this._activeNumber=e,(t=(n=this.info).onActiveStatusChange)==null||t.call(n,this),!0)}select(e){this.ctx.addBlockToSelection(this,e)}unselect(){this.isActive&&(this.ctx.activeBlocks.delete(this),this.ctx.syncActiveElementStatus())}focus(e){this.isActive||this.select(e),this.ctx.focus()}constructor(e,t,n){this.type="block",this.ctx=void 0,this.ownerSlot=void 0,this.slots=new Set,this.info=void 0,this._activeNumber=!1,this.handlePointerUp=()=>this.ctx.handleBlockPointerUp(this,!1),this.handlePointerUpCapture=()=>this.ctx.handleBlockPointerUp(this,!0),this.ctx=e,this.ownerSlot=t,t&&t.items.add(this),this.info=n}get index(){return Ie(this.info.index,this)}get data(){return Ie(this.info.data,this)}createSlot(e){return this.ctx.createSlot(e,this)}dispose(){var e;this.ctx.activeBlocks.has(this)&&(this.ctx.activeBlocks.delete(this),this.ctx.syncActiveElementStatus()),(e=this.ownerSlot)==null||e.items.delete(this),this.slots.forEach(t=>t.dispose()),this.slots.clear(),this.info=zt}}const zt={index:()=>{throw new Error("Accessing a disposed block")},data:()=>{throw new Error("Accessing a disposed block")}};function jt(o,e){let t,n;function r(s=!1){t&&(s&&n&&o(...n),clearTimeout(t),t=null,n=void 0)}const i=function(...s){n=s,t||(t=setTimeout(()=>r(!0),e))};return i.cancel=()=>r(!1),i.flush=()=>r(!0),i}function ve(o,e){const t=e.map(n=>o[n]).filter(n=>n!==void 0);return[...e].sort((n,r)=>r-n).forEach(n=>o.splice(n,1)),t}function Rt(o,e,t){const n=ve(o,e);o.splice(t,0,...n)}function Kt(o,e,t,n){const r=ve(o,e);t.splice(n,0,...r)}function Ue(o,e){if(e==="camelCase")return o;const t={};return Object.keys(o).forEach(n=>{var r;let i=n;e==="react"&&(i=`on${(r=i[0])==null?void 0:r.toUpperCase()}${i.substr(1)}`),e==="lowercase"&&(i=i.toLowerCase()),t[i]=o[n]}),t}function Ne(o,e){if(!o)return;let t=0;for(const n of o){if(e(n,t))return n;t+=1}}function U(o){if(o)return o[Symbol.iterator]().next().value}const Vt="webkitRequestAnimationFrame"in window,E=document.createElement("div");E.style.cssText="position:fixed;pointer-events:none;left:0;top:0;background: #FFF; border: 1px solid #000; padding: 4px 8px;transform:translate(-50%, -50%)";class Yt extends ct{constructor(e){super(),this.ctx=void 0,this.draggingBlocks=void 0,this.slotOfDraggingBlocks=void 0,this.isHovering=!1,this.hoveringSlot=void 0,this.hoveringBlock=void 0,this.dropEffect=void 0,this.setHoveringSlot=jt(this._originalSetHoveringSlot.bind(this),50),this.ctx=e}dispose(){this.removeAllListeners(),this.setHoveringSlot.cancel()}_originalSetHoveringSlot(e,t){var n;if(e&&typeof t!="number")throw new Error("Cannot setHoveringSlot with indexToDrop unknown");if(e===this.hoveringSlot)return void(e&&e.indexToDrop!==t&&(e.indexToDrop=t,e.info.onDragHoverStatusChange==null||e.info.onDragHoverStatusChange(this.ctx),this.emit("hoverChanged",this.ctx)));const r=this.hoveringSlot;((n=this.hoveringBlock)==null?void 0:n.ownerSlot)!==e&&(this.hoveringBlock=void 0),this.hoveringSlot=e,this.isHovering=!!e,r&&(r.isDragHovering=!1,r.indexToDrop=void 0,r.info.onDragHoverStatusChange==null||r.info.onDragHoverStatusChange(this.ctx)),e&&(e.isDragHovering=!0,e.indexToDrop=t,e.info.onDragHoverStatusChange==null||e.info.onDragHoverStatusChange(this.ctx)),this.emit("hoverChanged",this.ctx)}getDefaultBlockEventHandlers(e,t){return Ue({dragStart:this.handleBlockDragStart.bind(this,e),dragEnd:this.handleBlockDragEnd.bind(this,e),dragOver:this.handleBlockDragOver.bind(this,e),dragLeave:this.handleBlockDragLeave.bind(this,e)},t)}handleBlockDragStart(e,t){const n=t.dataTransfer;if(!n)return;this.ctx.activeBlocks.has(e)||this.ctx.addBlockToSelection(e,"none");const r=this.ctx.options.serializeForClipboard(this.ctx.dumpSelectedData());if(!r)return;const i=Array.from(this.ctx.activeBlocks),s=new Lt({type:"blockDragStart",text:r,blocks:i,ctx:this.ctx,currentBlock:e,dataTransfer:n,event:t});if(e.info.onDragStart==null||e.info.onDragStart(s),this.emit("blockDragStart",s),s.returnValue===!1)return;t.stopPropagation(),n.setData("text/plain",s.text),n.setData("x-block-context/uuid",this.ctx.uuid),n.setData(`x-block-context/brand-${this.ctx.brand}`,"true"),i.length>1&&(document.body.appendChild(E),E.style.left=`${t.clientX}px`,E.style.top=`${t.clientY}px`,setTimeout(()=>E.remove(),100),E.textContent=`${i.length} items`,n.setDragImage(E,E.offsetWidth/2,E.offsetHeight/2));const u=this.ctx.slotOfActiveBlocks;this.draggingBlocks=i,this.slotOfDraggingBlocks=u||void 0,u&&(this.setHoveringSlot(u,e.index),this.setHoveringSlot.flush())}handleBlockDragEnd(e,t){this.slotOfDraggingBlocks=void 0,this.draggingBlocks=void 0,this.setHoveringSlot(void 0)}handleBlockDragOver(e){this.hoveringBlock!==e&&e.ownerSlot==this.hoveringSlot&&(this.hoveringBlock=e,this.emit("hoverChanged",this.ctx))}handleBlockDragLeave(e){this.hoveringBlock===e&&(this.hoveringBlock=void 0,this.emit("hoverChanged",this.ctx))}getDefaultSlotEventHandlers(e,t){return Ue({dragOver:n=>{this.handleSlotDragOver(e,n)&&(n.preventDefault(),n.stopPropagation())},dragLeave:n=>{this.handleSlotDragLeave(e),n.preventDefault(),n.stopPropagation()},drop:n=>{this.handleSlotDrop(e,n),n.preventDefault(),n.stopPropagation()}},t)}handleSlotDragOver(e,t){var n;if((n=t.dataTransfer)!=null&&n.types.includes("x-block-context/uuid")&&!t.dataTransfer.types.includes(`x-block-context/brand-${this.ctx.brand}`))return!1;const r=this.computeIndexToDrop(e,t);return r!==!1&&(this.setHoveringSlot(e,r),!0)}handleSlotDrop(e,t){const n=this.computeIndexToDrop(e,t);if(n===!1)return;const r=this.dropEffect,i=this.draggingBlocks,s=this.ctx,u=new Mt({type:"slotBeforeDrop",ctx:s,slot:e,dropEffect:r,dataTransfer:t.dataTransfer,event:t,indexToDrop:n,isDraggingFromCurrentCtx:!!i,draggingBlocks:i});if(this.emit("slotBeforeDrop",u),u.returnValue===!1)return this.setHoveringSlot(void 0),void this.setHoveringSlot.flush();if(this.setHoveringSlot(e,n),this.setHoveringSlot.flush(),i&&r!=="copy")if(e===s.slotOfActiveBlocks){const d=n-i.filter(c=>c.index<n).length,_=new Nt({type:"moveInSlot",blocks:i,ctx:s,slot:e,index:d});if(e.info.onMoveInSlot==null||e.info.onMoveInSlot(_),s.emit("moveInSlot",_),!_.returnValue)return;setTimeout(()=>{s.activeSlot=e,s.activeBlocks.clear(),e.items.forEach(c=>{const v=c.index;v>=d&&v<d+i.length&&s.activeBlocks.add(c)}),s.syncActiveElementStatus(),s.focus()},100)}else{const d=n,_=new Ft({type:"moveBetweenSlots",blocks:i,ctx:s,fromSlot:s.slotOfActiveBlocks,toSlot:e,index:d});if(e.info.onMoveToThisSlot==null||e.info.onMoveToThisSlot(_),s.emit("moveBetweenSlots",_),!_.returnValue)return;setTimeout(()=>{s.activeSlot=e,s.activeBlocks.clear(),e.items.forEach(c=>{const v=c.index;v>=d&&v<d+i.length&&s.activeBlocks.add(c)}),s.syncActiveElementStatus(),s.focus()},100)}else try{const d=this.ctx.options.unserializeForClipboard(t.dataTransfer.getData("text/plain"));s.activeSlot=e,s.activeBlocks.clear(),s.syncActiveElementStatus(),s.pasteWithData(d,n),s.focus()}catch{console.error("Failed to drop")}this.setHoveringSlot(void 0)}handleSlotDragLeave(e){this.setHoveringSlot(void 0)}computeIndexToDrop(e,t){var n;let r=t.dataTransfer.dropEffect;if(r==="none"&&Vt&&(r=t.ctrlKey||t.altKey?"copy":"move"),this.dropEffect=r,this.dropEffect!=="copy"&&(n=this.draggingBlocks)!=null&&n.some(d=>e.isDescendantOfBlock(d)))return!1;const i=e.info.computeIndexToDrop==null?void 0:e.info.computeIndexToDrop({ctx:this.ctx,slot:e,isDraggingFromCurrentCtx:!!this.draggingBlocks,draggingBlocks:this.draggingBlocks,dataTransfer:t.dataTransfer,dropEffect:this.dropEffect,currentTarget:t.currentTarget,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY});return i!==!1&&(i===void 0?(s=(u=this.hoveringBlock)==null?void 0:u.index)!=null?s:function(d,_,c){if(!d)return 0;let v=0;for(const l of d)v=Math.max(v,l.index+1);return v}(e.items):i);var s,u}}class Jt{constructor(e,t,n){this.type="slot",this.ctx=void 0,this.ownerBlock=void 0,this.items=new Set,this.info=void 0,this.handlePointerUp=()=>this.ctx.handleSlotPointerUp(this),this.handlePointerUpCapture=()=>this.ctx.handleSlotPointerUp(this,!0),this._isActive=!1,this.ctx=e,this.ownerBlock=t,t&&t.slots.add(this),this.info=n}createBlock(e){return this.ctx.createBlock(e,this)}get ref(){return this.info.ref}get isActive(){return this._isActive}_maybeUpdateActive(e){var t,n;return this._isActive!==e&&(this._isActive=e,(t=(n=this.info).onActiveStatusChange)==null||t.call(n,this),!0)}select(){this.ctx.activeSlot=this,this.ctx.activeBlocks=this.ctx.options.multipleSelect?new Set(this.items):this.items.size?new Set([U(this.items)]):new Set,this.ctx.syncActiveElementStatus()}focus(){this.isActive||(this.ctx.activeBlocks.clear(),this.ctx.activeSlot=this,this.ctx.syncActiveElementStatus()),this.ctx.focus()}isDescendantOfBlock(e){let t=this.ownerBlock;for(;t;){var n;if(t===e)return!0;t=(n=t.ownerSlot)==null?void 0:n.ownerBlock}return!1}isDescendantOfSlot(e){var t;let n=(t=this.ownerBlock)==null?void 0:t.ownerSlot;for(;n;){var r;if(n===e)return!0;n=(r=n.ownerBlock)==null?void 0:r.ownerSlot}return!1}dispose(){var e;let t=!1;this.ctx.slotOfActiveBlocks===this&&(this.ctx.activeBlocks.clear(),t=!0),this.ctx.activeSlot===this&&(this.ctx.activeSlot=null,t=!0),t&&this.ctx.syncActiveElementStatus(),(e=this.ownerBlock)==null||e.slots.delete(this),this.items.forEach(n=>n.dispose()),this.items.clear(),this.info={}}}const Xt={brand:"",deactivateHandlersWhenBlur:!0,navigateWithArrowKeys:!0,handleDeleteKey:!0,multipleSelect:!0,serializeForClipboard:o=>JSON.stringify(o),unserializeForClipboard:o=>JSON.parse(o)};class qt extends ct{constructor(e={}){super(),this.hiddenInput=void 0,this._lastActiveElement=null,this.hasFocus=!1,this.options=void 0,this.brand="",this.uuid=`${Date.now().toString(36)}-${Math.random().toString(36)}`,this.dragging=new Yt(this),this.activeBlocks=new Set,this.slotOfActiveBlocks=null,this.activeSlot=null,this.lastActiveSlot=null,this.lastActiveBlocks=void 0,this.isFocusingBlock=void 0,this.isFocusingSlot=void 0,this.handleSlotPointerUp=(r,i)=>{!i&&this.isFocusingSlot||(this.isFocusingSlot=r)},this.handleBlockPointerUp=(r,i)=>{!i&&this.isFocusingBlock||(this.isFocusingBlock=r)},this.handleGlobalPointerUp=r=>{const i=this.isFocusingBlock,s=this.isFocusingSlot;this.isFocusingBlock=void 0,this.isFocusingSlot=void 0,i?(this.activeSlot=s||null,this.addBlockToSelection(i,r)):(this.activeSlot=s||null,this.options.deactivateHandlersWhenBlur&&this.activeBlocks.size>0&&this.activeBlocks.clear()),this.syncActiveElementStatus()},this.options=ce({},Xt,e),this.brand=String(this.options.brand),document.addEventListener("pointerup",this.handleGlobalPointerUp,!1);const t=this.hiddenInput=document.createElement("textarea");t.style.cssText="opacity:0;left:0;top:0;position:fixed;width:2px;height:2px",t.tabIndex=-1,t.inputMode="none",t.ownerDocument.body.appendChild(t);const n=r=>{var i;const s=this.options.serializeForClipboard(this.dumpSelectedData());s&&(r.preventDefault(),(i=r.clipboardData)==null||i.setData("text/plain",s))};t.addEventListener("copy",r=>{n(r)},!1),t.addEventListener("cut",r=>{n(r),this.deleteActiveBlocks()},!1),t.addEventListener("paste",r=>{r.preventDefault();try{var i;const s=(i=r.clipboardData)==null?void 0:i.getData("text/plain");if(!s)return;const u=this.options.unserializeForClipboard(s);this.pasteWithData(u)}catch(s){console.error("Failed to paste!",s)}},!1),t.addEventListener("focus",()=>{this.hasFocus=!0,this.emit("focus",this)},!1),t.addEventListener("blur",()=>{this.hasFocus=!1,this._lastActiveElement=null,this.emit("blur",this)},!1),t.addEventListener("keydown",r=>{const i=this.options;switch(r.code){case"KeyA":var s,u;i.multipleSelect&&(r.ctrlKey||r.metaKey)&&(this.activeBlocks=new Set(Array.from(((s=this.slotOfActiveBlocks)==null?void 0:s.items)||((u=this.activeSlot)==null?void 0:u.items)||[]).sort((d,_)=>d.index-_.index)),this.syncActiveElementStatus());break;case"ArrowUp":i.navigateWithArrowKeys&&this.activeNextBlock(-1,r.shiftKey||r.ctrlKey||r.metaKey);break;case"ArrowDown":i.navigateWithArrowKeys&&this.activeNextBlock(1,r.shiftKey||r.ctrlKey||r.metaKey);break;case"ArrowLeft":i.navigateWithArrowKeys&&this.activeParentBlock();break;case"ArrowRight":i.navigateWithArrowKeys&&this.activeChildrenBlocks();break;case"Delete":case"Backspace":i.handleDeleteKey&&this.deleteActiveBlocks();break;case"Tab":{const d=this._lastActiveElement;if(d&&"focus"in d){const _=d.tabIndex===-1&&d.querySelector("[tabIndex], button, textarea, input, select, a, [contentEditable]");_&&"focus"in _?_.focus():d.focus()}r.preventDefault()}}},!1)}focus(){document.activeElement!==this.hiddenInput&&(this._lastActiveElement=document.activeElement,this.hiddenInput.focus())}dumpSelectedData(){const e={isIBClipboardData:!0,ibContextBrand:this.brand,ibContextUUID:this.uuid,blocksData:[]};if(this.activeBlocks.forEach(t=>{e.blocksData.push(t.data)}),e.blocksData.length!==0)return e}copy(){this.hiddenInput.focus(),document.execCommand("copy")}pasteWithData(e,t){if(!Ot(e,this.brand))throw new Error("Need a valid IBClipboardData object");const n=this.activeSlot;if(!n)return;const r=U(this.activeBlocks),i=t!=null?t:n===(r==null?void 0:r.ownerSlot)?r.index:Math.max(0,...Array.from(n.items.values(),u=>1+u.index)),s=new It({type:"paste",ctx:this,data:e,slot:n,index:i});n.info.onPaste==null||n.info.onPaste(s),this.emit("paste",s),s.returnValue!==!1&&setTimeout(()=>{const u=e.blocksData.length+i-1,d=Array.from(n.items).filter(_=>_.index>=i&&_.index<=u);d.length&&(this.activeSlot=n,this.activeBlocks.clear(),d.forEach(_=>this.activeBlocks.add(_)),this.syncActiveElementStatus())},100)}deleteActiveBlocks(){var e;const t=Array.from(this.activeBlocks.values()),n=(e=t[0])==null?void 0:e.ownerSlot;if(!n)return!1;const r=t[0].index,i=new Ut({type:"cut",blocks:t,ctx:this,slot:n});if(n.info.onCut==null||n.info.onCut(i),this.emit("cut",i),i.returnValue){const s=Ne(n.items,u=>u.index===r);s&&this.addBlockToSelection(s)}return i.returnValue}activeNextBlock(e,t=!1){const n=t&&this.options.multipleSelect;this.focus();let r=!0,i=Array.from(this.activeBlocks);var s;if(!i.length&&(i=Array.from(((s=this.activeSlot)==null?void 0:s.items)||[]),r=!1,!i.length))return;const u=i[0].ownerSlot;let d=i[0].index,_=d,c=i[0],v=c;i.slice(1).forEach(h=>{if(h.ownerSlot!==u)return;const g=h.index;g>d&&(d=g,c=h),g<_&&(_=g,v=h)});const l=e>0?d+e:_+e,a=Ne(u==null?void 0:u.items,h=>h.index===l);a?(n||this.activeBlocks.clear(),this.activeBlocks.add(a),this.activeSlot=u,this.syncActiveElementStatus()):r?n||(this.activeBlocks.clear(),i.length>1&&this.activeBlocks.add(e>0?c:v),this.syncActiveElementStatus()):(this.activeBlocks.clear(),n?i.forEach(h=>this.activeBlocks.add(h)):this.activeBlocks.add(e>0?v:c),this.syncActiveElementStatus())}activeParentBlock(){var e;const t=(e=this.activeSlot)==null?void 0:e.ownerBlock;this.activeSlot=(t==null?void 0:t.ownerSlot)||null,this.activeBlocks.clear(),t&&this.activeBlocks.add(t),this.syncActiveElementStatus()}activeChildrenBlocks(){const e=U(this.activeBlocks),t=U(e==null?void 0:e.slots);if(t){if(this.activeSlot=t,this.activeBlocks.clear(),this.options.multipleSelect)t.items.forEach(n=>this.activeBlocks.add(n));else{const n=U(t.items);n&&this.activeBlocks.add(n)}this.syncActiveElementStatus()}}syncActiveElementStatus(){var e;let t=!1;const n=this.lastActiveBlocks,r=this.lastActiveSlot,i=Array.from(this.activeBlocks),s=((e=i[0])==null?void 0:e.ownerSlot)||null;var u;i.length>1&&s!==this.activeSlot&&(this.activeSlot=s),!this.activeSlot&&s&&(this.activeSlot=s),i.forEach((d,_)=>{n==null||n.delete(d),t=d._maybeUpdateActiveNumber(_)||t}),n==null||n.forEach(d=>{t=d._maybeUpdateActiveNumber(!1)||t}),this.activeSlot!==r&&(r==null||r._maybeUpdateActive(!1),(u=this.activeSlot)==null||u._maybeUpdateActive(!0),this.lastActiveSlot=this.activeSlot,t=!0),this.lastActiveBlocks=new Set(this.activeBlocks),this.slotOfActiveBlocks=s,t&&this.emit("activeElementChanged",this)}clearSelection(){this.activeBlocks.clear(),this.activeSlot=null,this.syncActiveElementStatus()}addBlockToSelection(e,t){var n;if(t=(n=t)?n===!0?"ctrl":typeof n=="object"?n.ctrlKey||n.metaKey?"ctrl":n.shiftKey?"shift":"none":n==="ctrl"?"ctrl":n==="shift"?"shift":"none":"none",this.options.multipleSelect||(t="none"),t==="none")this.activeBlocks.clear(),this.activeBlocks.add(e);else{const r=U(this.activeBlocks);if(r&&r.ownerSlot!==e.ownerSlot){const i=[];for(let u=r;u&&u.ownerSlot;)i.push(u.ownerSlot),u=u.ownerSlot.ownerBlock;let s=-1;for(let u=e;u&&u.ownerSlot;u=u.ownerSlot.ownerBlock)if((s=i.indexOf(u.ownerSlot))!==-1){e=u;break}s===-1?this.activeBlocks.clear():s>0&&(this.activeBlocks=new Set(Array.from(this.activeBlocks,u=>{for(let d=s;d>0;d--,u=u.ownerSlot.ownerBlock);return u})))}this.activeSlot=e.ownerSlot||null,this.activeSlot||(t="ctrl")}if(t==="ctrl"&&this.activeBlocks.add(e),t==="shift"){const r=this.activeSlot,i=e.index;let s=i,u=i;this.activeBlocks.forEach(d=>{const _=d.index;s>_&&(s=_),u<_&&(u=_)}),this.activeBlocks=new Set(Array.from(r.items).filter(d=>{const _=d.index;return _>=s&&_<=u}).sort((d,_)=>d.index-_.index))}this.syncActiveElementStatus()}dispose(){var e;this.dragging.dispose(),(e=this.hiddenInput.parentElement)==null||e.removeChild(this.hiddenInput),document.removeEventListener("pointerup",this.handleGlobalPointerUp,!1)}createBlock(e,t=null){return new Wt(this,t,e)}createSlot(e,t=null){return new Jt(this,t,e)}}const Gt=()=>[{name:"\u{1F9E9} Click to Pick"},{name:"Drag Card into Fence \u{1F447}",children:[{name:"\u{1F36C} Alice"},{name:"\u{1F9F8} Bob"}]},{name:"\u2328 Copy and Paste works too"}],Zt=o=>{const e=[...o],t={};return{root:e,copiedBlocks:t,getSlotAndBlock(n){let r=e,i=null,s="";return n.forEach(u=>{if(s+=`/${u}`,!(s in t)){const d=r[u],_=xe(O({},d),{children:[...d.children||[]]});r[u]=_,t[s]=_}i=t[s],r=i.children}),{slot:r,block:i}}}},Qt=(o,e)=>{if("__demo_wholeReplace__"in e)return e.__demo_wholeReplace__;const t=Zt(o),{slot:n,block:r}=t.getSlotAndBlock(e.path);if(e.rename&&r&&(r.name=e.rename.name),e.insert&&n.splice(e.insert.index,0,...e.insert.items),e.remove&&ve(n,e.remove.indexes),e.moveInSlot){const{fromIndexes:i,toIndex:s}=e.moveInSlot;Rt(n,i,s)}if(e.moveBetweenSlots){const{fromPath:i,fromIndexes:s,toIndex:u}=e.moveBetweenSlots,d=t.getSlotAndBlock(i).slot;Kt(d,s,n,u)}return console.log("store reducer called",e,t),t.root},at=de(null),eo=o=>{const e=he(Qt,null,Gt);return m(at.Provider,{value:e},o.children)},te=()=>fe(at);function to(o,e){for(var t in e)o[t]=e[t];return o}function ae(o,e){for(var t in o)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&o[n]!==e[n])return!0;return!1}function Fe(o){this.props=o}function ut(o,e){function t(r){var i=this.props.ref,s=i==r.ref;return!s&&i&&(i.call?i(null):i.current=null),e?!e(this.props,r)||!s:ae(this.props,r)}function n(r){return this.shouldComponentUpdate=t,m(o,r)}return n.displayName="Memo("+(o.displayName||o.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Fe.prototype=new w).isPureReactComponent=!0,Fe.prototype.shouldComponentUpdate=function(o,e){return ae(this.props,o)||ae(this.state,e)};var Le=f.__b;f.__b=function(o){o.type&&o.type.__f&&o.ref&&(o.props.ref=o.ref,o.ref=null),Le&&Le(o)};var oo=f.__e;f.__e=function(o,e,t,n){if(o.then){for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(o,e)}oo(o,e,t,n)};var Me=f.unmount;function ie(){this.__u=0,this.t=null,this.__b=null}function dt(o){var e=o.__.__c;return e&&e.__e&&e.__e(o)}function V(){this.u=null,this.o=null}f.unmount=function(o){var e=o.__c;e&&e.__R&&e.__R(),e&&o.__h===!0&&(o.type=null),Me&&Me(o)},(ie.prototype=new w).__c=function(o,e){var t=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var r=dt(n.__v),i=!1,s=function(){i||(i=!0,t.__R=null,r?r(u):u())};t.__R=s;var u=function(){if(!--n.__u){if(n.state.__e){var _=n.state.__e;n.__v.__k[0]=function v(l,a,h){return l&&(l.__v=null,l.__k=l.__k&&l.__k.map(function(g){return v(g,a,h)}),l.__c&&l.__c.__P===a&&(l.__e&&h.insertBefore(l.__e,l.__d),l.__c.__e=!0,l.__c.__P=h)),l}(_,_.__c.__P,_.__c.__O)}var c;for(n.setState({__e:n.__b=null});c=n.t.pop();)c.forceUpdate()}},d=e.__h===!0;n.__u++||d||n.setState({__e:n.__b=n.__v.__k[0]}),o.then(s,s)},ie.prototype.componentWillUnmount=function(){this.t=[]},ie.prototype.render=function(o,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function i(s,u,d){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(_){typeof _.__c=="function"&&_.__c()}),s.__c.__H=null),(s=to({},s)).__c!=null&&(s.__c.__P===d&&(s.__c.__P=u),s.__c=null),s.__k=s.__k&&s.__k.map(function(_){return i(_,u,d)})),s}(this.__b,t,n.__O=n.__P)}this.__b=null}var r=e.__e&&m(A,null,o.fallback);return r&&(r.__h=null),[m(A,null,e.__e?null:o.children),r]};var We=function(o,e,t){if(++t[1]===t[0]&&o.o.delete(e),o.props.revealOrder&&(o.props.revealOrder[0]!=="t"||!o.o.size))for(t=o.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;o.u=t=t[2]}};(V.prototype=new w).__e=function(o){var e=this,t=dt(e.__v),n=e.o.get(o);return n[0]++,function(r){var i=function(){e.props.revealOrder?(n.push(r),We(e,o,n)):r()};t?t(i):i()}},V.prototype.render=function(o){this.u=null,this.o=new Map;var e=G(o.children);o.revealOrder&&o.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return o.children},V.prototype.componentDidUpdate=V.prototype.componentDidMount=function(){var o=this;this.o.forEach(function(e,t){We(o,t,e)})};var no=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,io=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ro=typeof document!="undefined",so=function(o){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(o)};w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(o){Object.defineProperty(w.prototype,o,{configurable:!0,get:function(){return this["UNSAFE_"+o]},set:function(e){Object.defineProperty(this,o,{configurable:!0,writable:!0,value:e})}})});var ze=f.event;function lo(){}function co(){return this.cancelBubble}function ao(){return this.defaultPrevented}f.event=function(o){return ze&&(o=ze(o)),o.persist=lo,o.isPropagationStopped=co,o.isDefaultPrevented=ao,o.nativeEvent=o};var je={configurable:!0,get:function(){return this.class}},Re=f.vnode;f.vnode=function(o){var e=o.type,t=o.props,n=t;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var i in n={},t){var s=t[i];ro&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in t&&s==null||(i==="defaultValue"&&"value"in t&&t.value==null?i="value":i==="download"&&s===!0?s="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!so(t.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():r&&io.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():s===null&&(s=void 0),n[i]=s)}e=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=G(t.children).forEach(function(u){u.props.selected=n.value.indexOf(u.props.value)!=-1})),e=="select"&&n.defaultValue!=null&&(n.value=G(t.children).forEach(function(u){u.props.selected=n.multiple?n.defaultValue.indexOf(u.props.value)!=-1:n.defaultValue==u.props.value})),o.props=n,t.class!=t.className&&(je.enumerable="className"in t,t.className!=null&&(n.class=t.className),Object.defineProperty(n,"className",je))}o.$$typeof=no,Re&&Re(o)};var Ke=f.__r;f.__r=function(o){Ke&&Ke(o),o.__c};const ht=de(null),_t=()=>fe(ht),uo=ht.Provider,oe=de(null);oe.displayName="OwnerSlot";const ho=()=>fe(oe),_o=oe.Provider;oe.Consumer;const me=o=>{const e=Q(o);e.current=o,_e(()=>()=>e.current(),[])},ft=()=>{const[,o]=he(e=>(e+1)%16777215,0);return o},fo=o=>O({},o),po=o=>O({},o),N=o=>{const e=[];for(;o;)e.unshift(o.index),o=o.ownerSlot.ownerBlock;return e},ne=(...o)=>o.filter(e=>!!e).map(e=>Array.isArray(e)?ne(e):String(e)).join(" "),pt=ut(function(e){var v;const t=e.ownerBlock||null,[,n]=te(),r=ft(),i=_t(),s=$(()=>i.createSlot({onCut:l=>n({path:N(t),remove:{indexes:l.blocks.map(a=>a.index)}}),onPaste:l=>n({path:N(t),insert:{index:l.index,items:l.data.blocksData.map(fo)}}),onActiveStatusChange:()=>r(),onDragHoverStatusChange:()=>r(),onMoveInSlot:l=>n({path:N(t),moveInSlot:{fromIndexes:l.blocks.map(a=>a.index),toIndex:l.index}}),onMoveToThisSlot:l=>{var a;return n({path:N(t),moveBetweenSlots:{fromPath:N((a=l.fromSlot)==null?void 0:a.ownerBlock),fromIndexes:l.blocks.map(h=>h.index),toIndex:l.index}})}},t),[]);me(()=>s.dispose());const u=F(l=>{s.handlePointerUp(),document.activeElement===l.currentTarget&&s.ctx.focus()},[]),d=$(()=>i.dragging.getDefaultSlotEventHandlers(s,"react"),[]),{isActive:_,isDragHovering:c}=s;return m("div",O({className:ne("mySlot",_&&"isActive",c&&"isDragHovering"),tabIndex:-1,onPointerUp:u},d),m(_o,{value:s},((v=e.children)==null?void 0:v.length)>0?e.children:m("div",{className:"mySlot-emptyPlaceholder"},"Empty")),s.isDragHovering&&m("div",{className:"mySlot-indexToDrop",key:"indexToDrop",style:{"grid-row-start":s.indexToDrop+1}},`indexToDrop = ${s.indexToDrop}`))}),vo=ut(function o(e){var a;const{index:t,item:n}=e,r=ft(),i=Q();$t(i,()=>({index:t,item:n}),[t,n]);const s=_t(),u=ho(),d=$(()=>s.createBlock({data:()=>po(i.current.item),index:()=>i.current.index,onActiveStatusChange:()=>r()},u),[]);me(()=>d.dispose());const _=F(h=>{d.handlePointerUp(),document.activeElement===h.currentTarget&&d.ctx.focus()},[]),c=$(()=>s.dragging.getDefaultBlockEventHandlers(d,"react"),[]),{activeNumber:v,isActive:l}=d;return m("div",O({className:ne("myBlock",l&&"isActive"),tabIndex:-1,onPointerUp:_,draggable:!0},c),l&&m("div",{className:"myBlock-selectIndex"},v+1),m(mo,{name:n.name,blockHandler:d}),m(pt,{ownerBlock:d},(a=n.children)!=null&&a.length?n.children.map((h,g)=>m(o,{key:g,index:g,item:h})):null))}),mo=o=>{const[,e]=te(),t=F(n=>{const r=o.blockHandler,i=N(r),s=n.currentTarget.value;e({path:i,rename:{name:s}})},[]);return m("input",{className:"blockNameInput",type:"text",value:o.name,onChange:t})},go=()=>{const[o,e]=te(),t=Q(null);_e(()=>{t.current.value=JSON.stringify(o,null,2)},[o]);const n=Q(null);n.current=o;const r=F((u=!0)=>{try{const d=JSON.parse(t.current.value);e({path:[],__demo_wholeReplace__:d})}catch(d){u&&(t.current.value=JSON.stringify(n.current,null,2)),console.error("Failed to replace: ",d)}},[]),i=F(()=>r(!0),[]),s=F(()=>r(!1),[]);return m("div",null,m("ul",null,m("li",null,"Click to select block / slot"),m("li",null,"Drag and drop. Also supports cross-window dragging."),m("li",null,"Copy, Cut, Paste with ",m("kbd",null,"Ctrl+C")," / ",m("kbd",null,"Ctrl+X")," / ",m("kbd",null,"Ctrl+V")),m("li",null,"Navigate between blocks with arrow keys"),m("li",null,"Select multiple blocks with ",m("kbd",null,"Ctrl")," or ",m("kbd",null,"Shift"))),m("h3",null,"Current Data"),m("textarea",{class:"demoPage-store",spellcheck:!1,ref:t,onBlur:i,onInput:s}))},yo=function(){const[o]=te(),[e,t]=Pt(!1),n=$(()=>new qt,[]);return me(()=>n.dispose()),_e(()=>{window.blockContext=n,n.on("focus",()=>t(!0)),n.on("blur",()=>t(!1)),n.on("paste",r=>{console.log("pasting...",r)})},[]),m(uo,{value:n},xo,m("div",{className:ne("demoPage",e&&"hasFocus")},m("div",{className:"demoPage-introductionArea"},m(go,null)),m("div",{className:"demoPage-blockArea"},m(pt,null,o.map((r,i)=>m(vo,{key:i,index:i,item:r}))))))},ko="https://github.com/lyonbot/interactive-blocks",bo="https://lyonbot.github.io/interactive-blocks/docs/",xo=m(A,null,m("h2",null,"InteractiveBlocks"),m("p",null,"Just proving the abilities with shabby Slot and Block components here."),m("p",null,"Learn how to integrate with your own components? ",m("a",{href:bo,target:"_blank"},"Read the Document \xBB")),m("a",{className:"demoPage-forkMe",href:ko,target:"_blank"},"Fork me on GitHub"));typeof window!="undefined"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.7.3",f,{Fragment:A,Component:w});var Ve={};function P(o){return o.type===A?"Fragment":typeof o.type=="function"?o.type.displayName||o.type.name:typeof o.type=="string"?o.type:"#text"}var R=[],I=[];function vt(){return R.length>0?R[R.length-1]:null}var Ye=!1;function re(o){return typeof o.type=="function"&&o.type!=A}function x(o){for(var e=[o],t=o;t.__o!=null;)e.push(t.__o),t=t.__o;return e.reduce(function(n,r){n+="  in "+P(r);var i=r.__source;return i?n+=" (at "+i.fileName+":"+i.lineNumber+")":Ye||(Ye=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),n+`
`},"")}var So=typeof WeakMap=="function",wo=w.prototype.setState;w.prototype.setState=function(o,e){return this.__v==null?this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+x(vt())):this.__P==null&&console.warn(`Can't call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+x(this.__v)),wo.call(this,o,e)};var Bo=w.prototype.forceUpdate;function D(o){var e=o.props,t=P(o),n="";for(var r in e)if(e.hasOwnProperty(r)&&r!=="children"){var i=e[r];typeof i=="function"&&(i="function "+(i.displayName||i.name)+"() {}"),i=Object(i)!==i||i.toString?i+"":Object.prototype.toString.call(i),n+=" "+r+"="+JSON.stringify(i)}var s=e.children;return"<"+t+n+(s&&s.length?">..</"+t+">":" />")}w.prototype.forceUpdate=function(o){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+x(vt())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+x(this.__v)),Bo.call(this,o)},function(){(function(){var l=f.__b,a=f.diffed,h=f.__,g=f.vnode,y=f.__r;f.diffed=function(p){re(p)&&I.pop(),R.pop(),a&&a(p)},f.__b=function(p){re(p)&&R.push(p),l&&l(p)},f.__=function(p,k){I=[],h&&h(p,k)},f.vnode=function(p){p.__o=I.length>0?I[I.length-1]:null,g&&g(p)},f.__r=function(p){re(p)&&I.push(p),y&&y(p)}})();var o=!1,e=f.__b,t=f.diffed,n=f.vnode,r=f.__e,i=f.__,s=f.__h,u=So?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,d=[];f.__e=function(l,a,h,g){if(a&&a.__c&&typeof l.then=="function"){var y=l;l=new Error("Missing Suspense. The throwing component was: "+P(a));for(var p=a;p;p=p.__)if(p.__c&&p.__c.__c){l=y;break}if(l instanceof Error)throw l}try{(g=g||{}).componentStack=x(a),r(l,a,h,g),typeof l.then!="function"&&setTimeout(function(){throw l})}catch(k){throw k}},f.__=function(l,a){if(!a)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var h;switch(a.nodeType){case 1:case 11:case 9:h=!0;break;default:h=!1}if(!h){var g=P(l);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+a+" instead: render(<"+g+" />, "+a+");")}i&&i(l,a)},f.__b=function(l){var a=l.type,h=function B(b){return b?typeof b.type=="function"?B(b.__):b:{}}(l.__);if(o=!0,a===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+D(l)+`

`+x(l));if(a!=null&&typeof a=="object")throw a.__k!==void 0&&a.__e!==void 0?new Error("Invalid type passed to createElement(): "+a+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+P(l)+" = "+D(a)+`;
  let vnode = <My`+P(l)+` />;

This usually happens when you export a JSX literal and not the component.

`+x(l)):new Error("Invalid type passed to createElement(): "+(Array.isArray(a)?"array":a));if(a!=="thead"&&a!=="tfoot"&&a!=="tbody"||h.type==="table"?a==="tr"&&h.type!=="thead"&&h.type!=="tfoot"&&h.type!=="tbody"&&h.type!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+D(l)+`

`+x(l)):a==="td"&&h.type!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+D(l)+`

`+x(l)):a==="th"&&h.type!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+D(l)+`

`+x(l)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+D(l)+`

`+x(l)),l.ref!==void 0&&typeof l.ref!="function"&&typeof l.ref!="object"&&!("$$typeof"in l))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof l.ref+`] instead
`+D(l)+`

`+x(l));if(typeof l.type=="string"){for(var g in l.props)if(g[0]==="o"&&g[1]==="n"&&typeof l.props[g]!="function"&&l.props[g]!=null)throw new Error(`Component's "`+g+'" property should be a function, but got ['+typeof l.props[g]+`] instead
`+D(l)+`

`+x(l))}if(typeof l.type=="function"&&l.type.propTypes){if(l.type.displayName==="Lazy"&&u&&!u.lazyPropTypes.has(l.type)){var y="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var p=l.type();u.lazyPropTypes.set(l.type,!0),console.warn(y+"Component wrapped in lazy() is "+P(p))}catch{console.warn(y+"We will log the wrapped component's name once it is loaded.")}}var k=l.props;l.type.__f&&delete(k=function(B,b){for(var C in b)B[C]=b[C];return B}({},k)).ref,function(B,b,C,mt,ge){Object.keys(B).forEach(function(ye){var H;try{H=B[ye](b,ye,mt,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(gt){H=gt}!H||H.message in Ve||(Ve[H.message]=!0,console.error("Failed prop type: "+H.message+(ge&&`
`+ge()||"")))})}(l.type.propTypes,k,0,P(l),function(){return x(l)})}e&&e(l)},f.__h=function(l,a,h){if(!l||!o)throw new Error("Hook can only be invoked from render methods.");s&&s(l,a,h)};var _=function(l,a){return{get:function(){var h="get"+l+a;d&&d.indexOf(h)<0&&(d.push(h),console.warn("getting vnode."+l+" is deprecated, "+a))},set:function(){var h="set"+l+a;d&&d.indexOf(h)<0&&(d.push(h),console.warn("setting vnode."+l+" is not allowed, "+a))}}},c={nodeName:_("nodeName","use vnode.type"),attributes:_("attributes","use vnode.props"),children:_("children","use vnode.props.children")},v=Object.create({},c);f.vnode=function(l){var a=l.props;if(l.type!==null&&a!=null&&("__source"in a||"__self"in a)){var h=l.props={};for(var g in a){var y=a[g];g==="__source"?l.__source=y:g==="__self"?l.__self=y:h[g]=y}}l.__proto__=v,n&&n(l)},f.diffed=function(l){if(l.__k&&l.__k.forEach(function(p){if(p&&p.type===void 0){delete p.__,delete p.__b;var k=Object.keys(p).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+k+`}.

`+x(l))}}),o=!1,t&&t(l),l.__k!=null)for(var a=[],h=0;h<l.__k.length;h++){var g=l.__k[h];if(g&&g.key!=null){var y=g.key;if(a.indexOf(y)!==-1){console.error('Following component has two or more children with the same key attribute: "'+y+`". This may cause glitches and misbehavior in rendering process. Component: 

`+D(l)+`

`+x(l));break}a.push(y)}}}}();Ct(m(eo,null,m(yo,null)),document.getElementById("app"));
